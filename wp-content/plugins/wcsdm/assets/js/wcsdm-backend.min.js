!function(r){"use strict";function n(e){var t=function(e){var t,a,o=wcsdm_backend.i18n.buttons,n={id:"add-rate",icon:"plus",label:"Add New Rate"},d={id:"save-settings",icon:"yes",label:"Save Changes"},c={};_.has(e,"left")&&(t=_.defaults(e.left,n),_.has(o,t.label)&&(t.label=o[t.label]),c.btn_left=t);_.has(e,"right")&&(a=_.defaults(e.right,d),_.has(o,a.label)&&(a.label=o[a.label]),c.btn_right=a);_.isEmpty(c)&&(t=_.defaults({},n),_.has(o,t.label)&&(t.label=o[t.label]),c.btn_left=t,a=_.defaults({},d),_.has(o,a.label)&&(a.label=o[a.label]),c.btn_right=a);return c}(e);r("#wcsdm-buttons").remove(),r("#btn-ok").hide().after(wp.template("wcsdm-buttons")(t))}var m=!1,e=window.console.error;window.console.error=function(){1!==arguments[0].toLowerCase().indexOf("google")&&(m=arguments[0],window.alert(m),r("#api_key_browser").trigger("click"),r("#woocommerce_wcsdm_api_key_browser").val(p.apiKeyBrowser)),e.apply(e,arguments)};var p={params:{},origin_lat:"",origin_lng:"",origin_address:"",zoomLevel:16,apiKeyBrowser:"",init:function(e){p.params=e,r(document).off("click",".wcsdm-edit-api-key",p.editApiKey),r(document).on("click",".wcsdm-edit-api-key",p.editApiKey),r(document).off("click",".wcsdm-edit-api-key-cancel",p.editApiKeyCancel),r(document).on("click",".wcsdm-edit-api-key-cancel",p.editApiKeyCancel),r(document).off("click","#wcsdm-btn--get-api-key",p.getApiKey),r(document).on("click","#wcsdm-btn--get-api-key",p.getApiKey),r(document).off("click",".wcsdm-edit-location",p.showStoreLocationPicker),r(document).on("click",".wcsdm-edit-location",p.showStoreLocationPicker),r(document).off("click","#wcsdm-btn--map-cancel",p.hideStoreLocationPicker),r(document).on("click","#wcsdm-btn--map-cancel",p.hideStoreLocationPicker),r(document).off("click","#wcsdm-btn--map-apply",p.applyStoreLocation),r(document).on("click","#wcsdm-btn--map-apply",p.applyStoreLocation),r(document).off("click","#wcsdm-map-search-panel-toggle",p.toggleMapSearch),r(document).on("click","#wcsdm-map-search-panel-toggle",p.toggleMapSearch)},editApiKey:function(e){e.preventDefault();var a=r(e.currentTarget),t=a.next("a"),o=a.closest("tr").find("input[type=hidden]"),n=a.closest("tr").find("input[type=text]"),d=a.closest("tr").find(".spinner"),c=a.find(".dashicons"),i=o.val(),s=n.val();if(a.hasClass("editing")){if(!s.length)return;t.addClass("wcsdm-hidden"),a.removeClass("editing"),n.prop("readonly",!0),c.toggleClass("dashicons-edit").toggleClass("dashicons-yes");var l=function(e){var t=r.Deferred();return a.hide(),d.css("visibility","visible"),r(".wcsdm-buttons-item,.wcsdm-link").prop("disabled",!0).css("opacity",.5),setTimeout(function(){a.show(),d.css("visibility","hidden"),r(".wcsdm-buttons-item,.wcsdm-link").prop("disabled",!1).css("opacity",1),t.resolve(!0)},e),t.promise()};switch(a.attr("id")){case"api_key_browser":p.apiKeyBrowser=o.val(),window.google=void 0,m=!1,r.getScript("https://maps.googleapis.com/maps/api/js?libraries=geometry,places&key="+s,function(){l(5e3).then(function(){m||o.val(s)})});break;default:l(500).then(function(){o.val(s)})}}else a.show().addClass("editing"),t.removeClass("wcsdm-hidden"),c.toggleClass("dashicons-edit").toggleClass("dashicons-yes"),n.prop("readonly",!1).val(i),d.css("visibility","hidden")},editApiKeyCancel:function(e){e.preventDefault();var t=r(e.currentTarget),a=t.prev("a"),o=a.find(".dashicons"),n=t.closest("tr").find("input[type=hidden]"),d=t.closest("tr").find("input[type=text]");t.addClass("wcsdm-hidden"),a.removeClass("editing"),o.toggleClass("dashicons-yes").toggleClass("dashicons-edit"),d.prop("readonly",!0).val(n.val()),n.val().length&&(m=!1)},getApiKey:function(e){e.preventDefault(),window.open("https://cloud.google.com/maps-platform/#get-started","_blank").focus()},showStoreLocationPicker:function(e){e.preventDefault(),m?window.alert(m):(r(".modal-close-link").hide(),n({left:{id:"map-cancel",label:"Cancel",icon:"undo"},right:{id:"map-apply",label:"Apply Changes",icon:"editor-spellcheck"}}),r("#wcsdm-field-group-wrap--location_picker").fadeIn().siblings().hide(),p.initMap())},hideStoreLocationPicker:function(e){e.preventDefault(),p.destroyMap(),r(".modal-close-link").show(),n(),r("#wcsdm-field-group-wrap--location_picker").hide().siblings().not(".wcsdm-hidden").fadeIn()},applyStoreLocation:function(t){if(t.preventDefault(),!m){var e=r("#woocommerce_wcsdm_api_key_browser").val();if(!_.isEmpty(e)){var a,o,n;r.when((a=jQuery.Deferred(),o=new google.maps.LatLng(parseFloat(p.params.defaultLat),parseFloat(p.params.defaultLng)),n=new google.maps.LatLng(parseFloat(p.params.testLat),parseFloat(p.params.testLng)),(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[o],destinations:[n],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC},function(e,t){"ok"===t.toLowerCase()?a.resolve(t,e):a.reject(t,e)}),a.promise())).then(function(e){if("ok"===e.toLowerCase()&&!m)return r("#woocommerce_wcsdm_origin_lat").val(p.origin_lat),r("#woocommerce_wcsdm_origin_lng").val(p.origin_lng),r("#woocommerce_wcsdm_origin_address").val(p.origin_address),void p.hideStoreLocationPicker(t);m?window.alert(m):window.alert(e)})}}},toggleMapSearch:function(e){e.preventDefault(),r(e.currentTarget).find("span").toggleClass("dashicons-search").toggleClass("dashicons-dismiss"),r("#wcsdm-map-search-panel").toggleClass("hide-main"),r("#wcsdm-map-search-panel-main").toggleClass("wcsdm-hidden")},destroyMap:function(){window.google=void 0,r("#wcsdm-map-canvas").empty(),r("#wcsdm-map-search-panel").remove()},initMap:function(){p.destroyMap(),m=!1;var e=r("#woocommerce_wcsdm_api_key_browser").val();_.isEmpty(e)&&(e="InvalidKey");var t="https://maps.googleapis.com/maps/api/js?libraries=geometry,places&key="+e;r.getScript(t,function(){p.renderMap()})},renderMap:function(){p.origin_lat=r("#woocommerce_wcsdm_origin_lat").val(),p.origin_lng=r("#woocommerce_wcsdm_origin_lng").val();var e={lat:_.isEmpty(p.origin_lat)?parseFloat(p.params.defaultLat):parseFloat(p.origin_lat),lng:_.isEmpty(p.origin_lng)?parseFloat(p.params.defaultLng):parseFloat(p.origin_lng)},a=new google.maps.Map(document.getElementById("wcsdm-map-canvas"),{mapTypeId:"roadmap",center:e,zoom:p.zoomLevel,streetViewControl:!1,mapTypeControl:!1}),o=new google.maps.Marker({map:a,position:e,draggable:!0,icon:p.params.marker}),n=new google.maps.InfoWindow({maxWidth:350});_.isEmpty(p.origin_lat)||_.isEmpty(p.origin_lng)?(n.setContent(p.params.i18n.drag_marker),n.open(a,o)):p.setLatLng(o.position,o,a,n),google.maps.event.addListener(o,"dragstart",function(){n.close()}),google.maps.event.addListener(o,"dragend",function(e){p.setLatLng(e.latLng,o,a,n)}),r("#wcsdm-map-wrap").prepend(wp.template("wcsdm-map-search-panel")()),a.controls[google.maps.ControlPosition.TOP_LEFT].push(document.getElementById("wcsdm-map-search-panel"));var d=new google.maps.places.SearchBox(document.getElementById("wcsdm-map-search-input"));a.addListener("bounds_changed",function(){d.setBounds(a.getBounds())});var c=[];d.addListener("places_changed",function(){var e=d.getPlaces();if(0!==e.length){c.forEach(function(e){e.setMap(null)}),c=[];var t=new google.maps.LatLngBounds;e.forEach(function(e){e.geometry?(o=new google.maps.Marker({map:a,position:e.geometry.location,draggable:!0,icon:p.params.marker}),p.setLatLng(e.geometry.location,o,a,n),google.maps.event.addListener(o,"dragstart",function(){n.close()}),google.maps.event.addListener(o,"dragend",function(e){p.setLatLng(e.latLng,o,a,n)}),c.push(o),e.geometry.viewport?t.union(e.geometry.viewport):t.extend(e.geometry.location)):console.log("Returned place contains no geometry")}),a.fitBounds(t)}})},setLatLng:function(o,n,d,c){(new google.maps.Geocoder).geocode({latLng:o},function(e,t){if(t===google.maps.GeocoderStatus.OK&&e[0]){var a=[p.params.i18n.latitude+": "+o.lat().toString(),p.params.i18n.longitude+": "+o.lng().toString()];c.setContent(a.join("<br />")),c.open(d,n),n.addListener("click",function(){c.open(d,n)}),r("#wcsdm-map-search-input").val(e[0].formatted_address),p.origin_lat=o.lat(),p.origin_lng=o.lng(),p.origin_address=e[0].formatted_address}}),d.setCenter(o)}},d={params:{},errorId:"wcsdm-errors-rate-fields",init:function(e){d.params=e,r(document).off("click",".wcsdm-link--advanced-rate",d.showAdvancedRateForm),r(document).on("click",".wcsdm-link--advanced-rate",d.showAdvancedRateForm),r(document).off("click","#wcsdm-btn--cancel-advanced",d.closeAdvancedRateForm),r(document).on("click","#wcsdm-btn--cancel-advanced",d.closeAdvancedRateForm),r(document).off("click","#wcsdm-btn--apply-advanced",d.applyAdvancedForm),r(document).on("click","#wcsdm-btn--apply-advanced",d.applyAdvancedForm),r(document).off("click","#wcsdm-btn--add-rate",d.handleAddRateButton),r(document).on("click","#wcsdm-btn--add-rate",d.handleAddRateButton),r(document).off("click","#wcsdm-btn--delete-rate-select",d.deleteRateRow),r(document).on("click","#wcsdm-btn--delete-rate-select",d.deleteRateRow),r(document).off("click","#wcsdm-btn--delete-rate-cancel",d.deleteRateRowCancel),r(document).on("click","#wcsdm-btn--delete-rate-cancel",d.deleteRateRowCancel),r(document).off("click","#wcsdm-btn--delete-rate-confirm",d.deleteRateRowConfirm),r(document).on("click","#wcsdm-btn--delete-rate-confirm",d.deleteRateRowConfirm),r(document).off("change","#wcsdm-table--table_rates--dummy thead .select-item",d.toggleRows),r(document).on("change","#wcsdm-table--table_rates--dummy thead .select-item",d.toggleRows),r(document).off("change","#wcsdm-table--table_rates--dummy tbody .select-item",d.toggleRow),r(document).on("change","#wcsdm-table--table_rates--dummy tbody .select-item",d.toggleRow),r(document).off("input",".wcsdm-field--context--dummy:not(a)"),r(document).on("input",".wcsdm-field--context--dummy:not(a)",function(a,o){var n;return function(){var e=this,t=arguments;clearTimeout(n),n=setTimeout(function(){n=null,a.apply(e,t)},o)}}(function(e){d.handleRateFieldDummy(e)},500)),r(document).off("change","#woocommerce_wcsdm_distance_unit",d.initForm),r(document).on("change","#woocommerce_wcsdm_distance_unit",d.initForm),d.initForm(),r("#wcsdm-table--table_rates--dummy tbody tr").length||d.addRateRow()},initForm:function(){r('.wcsdm-field-key--total_cost_type > option[value="formula"]').prop("disabled",!d.params.isPro);var e=r("#woocommerce_wcsdm_distance_unit").val(),t=r("#woocommerce_wcsdm_distance_unit").data("fields"),a=_.has(t.label,e)?t.label[e]:"";a&&a.length&&_.each(t.targets,function(e){r(e).text(a)})},handleAddRateButton:function(e){e.preventDefault(),r(e.currentTarget).prop("disabled",!0),d.addRateRow(),r(e.currentTarget).prop("disabled",!1)},handleRateFieldDummy:function(e){e.preventDefault();var t=r(e.target),a=t.closest("tr");a.find(".wcsdm-field--context--hidden[data-id="+t.data("id")+"]").val(e.target.value),t.hasClass("wcsdm-field--context--dummy--max_distance")&&(a.addClass("editing"),t.off("blur",d.sortRateRows),t.on("blur",d.sortRateRows))},showAdvancedRateForm:function(e){e.preventDefault(),r("#wcsdm-table--table_rates--dummy .select-item").prop("checked",!1),r("#wcsdm-table--table_rates--dummy tbody tr").removeClass(),r(e.currentTarget).closest("tr").addClass("editing").find(".wcsdm-field--context--hidden").each(function(e,t){r(".wcsdm-field--context--advanced[data-id="+r(t).data("id")+"]").val(r(t).val())}),n({left:{id:"cancel-advanced",label:"Cancel",icon:"undo"},right:{id:"apply-advanced",label:"Apply Changes",icon:"editor-spellcheck"}}),r(".modal-close-link").hide(),r("#wcsdm-field-group-wrap--advanced_rate").fadeIn().siblings(".wcsdm-field-group-wrap").hide()},applyAdvancedForm:function(e){e.preventDefault(),r(".wcsdm-field--context--advanced").each(function(e,t){var a=r(t).data("id");r("#wcsdm-table--table_rates--dummy tbody tr.editing .wcsdm-field--context--dummy[data-id="+a+"]:not(a)").val(r(t).val()),r("#wcsdm-table--table_rates--dummy tbody tr.editing .wcsdm-field--context--hidden[data-id="+a+"]:not(a)").val(r(t).val())}),d.closeAdvancedRateForm(e)},closeAdvancedRateForm:function(e){e.preventDefault(),r("#wcsdm-field-group-wrap--advanced_rate").hide().siblings(".wcsdm-field-group-wrap").not(".wcsdm-hidden").fadeIn(),n(),r(".modal-close-link").show(),d.scrollToTableRate(),d.sortRateRows()},highlightRow:function(){var e=r("#wcsdm-table--table_rates--dummy tbody tr.editing");e.length&&(e.addClass("highlighted"),setTimeout(function(){e.removeClass("highlighted")},1500)),r("#wcsdm-table--table_rates--dummy tbody tr").removeClass("editing")},addRateRow:function(){var e=r("#wcsdm-table--table_rates--dummy tbody tr:last-child");r("#wcsdm-table--table_rates--dummy tbody").append(wp.template("wcsdm-dummy-row")),e&&e.find(".wcsdm-field--context--hidden:not(a)").each(function(e,t){var a=r(t).data("id"),o="woocommerce_wcsdm_max_distance"===a?Math.ceil(1.8*parseInt(r(t).val(),10)):r(t).val();r("#wcsdm-table--table_rates--dummy tbody tr:last-child .wcsdm-field[data-id="+a+"]").val(o)}),d.scrollToTableRate(),d.initForm()},deleteRateRow:function(e){e.preventDefault(),r("#wcsdm-table--table_rates--dummy tbody .select-item:not(:checked)").closest("tr").hide(),r("#wcsdm-table--table_rates--dummy").find(".wcsdm-col--select-item, .wcsdm-col--link_advanced").hide(),r("#wcsdm-field-group-wrap--table_rates").siblings().hide(),d.scrollToTableRate(),n({left:{id:"delete-rate-cancel",label:"Cancel",icon:"undo"},right:{id:"delete-rate-confirm",label:"Confirm Delete",icon:"trash"}})},deleteRateRowCancel:function(e){e.preventDefault(),r("#wcsdm-table--table_rates--dummy tbody tr").show(),r("#wcsdm-table--table_rates--dummy").find(".wcsdm-col--select-item, .wcsdm-col--link_advanced").show(),r("#wcsdm-field-group-wrap--table_rates").siblings().not(".wcsdm-hidden").fadeIn(),d.scrollToTableRate(),n({left:{id:"delete-rate-select",label:"Delete Selected Rates",icon:"trash"}})},deleteRateRowConfirm:function(e){e.preventDefault(),r("#wcsdm-table--table_rates--dummy tbody .select-item:checked").closest("tr").remove(),r("#wcsdm-table--table_rates--dummy tbody tr").show(),r("#wcsdm-table--table_rates--dummy").find(".wcsdm-col--select-item, .wcsdm-col--link_advanced").show(),r("#wcsdm-table--table_rates--dummy .select-item").prop("checked",!1),r("#wcsdm-field-group-wrap--table_rates").siblings().not(".wcsdm-hidden").fadeIn(),n(),r("#wcsdm-table--table_rates--dummy tbody tr").length||d.addRateRow()},toggleRows:function(a){a.preventDefault(),r.each(r("#wcsdm-table--table_rates--dummy tbody tr"),function(e,t){d.toggleRowSelected(r(t),r(a.target).is(":checked"))}),r(a.target).is(":checked")?n({left:{id:"delete-rate-select",label:"Delete Selected Rates",icon:"trash"}}):n()},toggleRow:function(e){e.preventDefault();var t=r(e.target),a=r(e.target).closest("tr");d.toggleRowSelected(a,t.is(":checked")),r("#wcsdm-table--table_rates--dummy tbody .select-item:checked").length?n({left:{id:"delete-rate-select",label:"Delete Selected Rates",icon:"trash"}}):n();var o=r("#wcsdm-table--table_rates--dummy tbody .select-item").length===r("#wcsdm-table--table_rates--dummy tbody .select-item:checked").length;r("#wcsdm-table--table_rates--dummy thead .select-item").prop("checked",o)},toggleRowSelected:function(e,t){e.find(".wcsdm-field--context--dummy").prop("disabled",t),t?(e.addClass("selected").find(".select-item").prop("checked",t),e.find("a").css("opacity","0.4")):(e.removeClass("selected").find(".select-item").prop("checked",t),e.find("a").css("opacity","1"))},sortRateRows:function(){var e=r("#wcsdm-table--table_rates--dummy > tbody > tr").get().sort(function(e,t){var a=r(e).find(".wcsdm-field--context--dummy--max_distance").val(),o=r(t).find(".wcsdm-field--context--dummy--max_distance").val();return isNaN(a)||!a.length?2:(a=parseInt(a,10))<(o=parseInt(o,10))?-1:o<a?1:0});r.each(e,function(e,t){var a=r(t).hide();r("#wcsdm-table--table_rates--dummy").children("tbody").append(t),a.fadeIn("slow")}),setTimeout(function(){d.highlightRow()},100)},scrollToTableRate:function(){r(".wc-modal-shipping-method-settings").scrollTop(r(".wc-modal-shipping-method-settings").find("form").outerHeight())}},t={initFrom:function(){r("#woocommerce_wcsdm_origin_type").trigger("change"),r(".wc-modal-shipping-method-settings table.form-table").each(function(e,t){r(t).find("tr").length||r(t).remove()}),r(".wcsdm-field-group").each(function(e,t){var a=r(t).attr("id").replace("woocommerce_wcsdm_field_group_",""),o=r(t).next("p").detach(),n=r(t).nextAll("table.form-table").first().attr("id","wcsdm-table--"+a).addClass("wcsdm-table wcsdm-table--"+a).detach();r(t).wrap('<div id="wcsdm-field-group-wrap--'+a+'" class="wcsdm-field-group-wrap wcsdm-field-group-wrap--'+a+'"></div>'),o.appendTo("#wcsdm-field-group-wrap--"+a),n.appendTo("#wcsdm-field-group-wrap--"+a),r(t).hasClass("wcsdm-field-group-hidden")&&r("#wcsdm-field-group-wrap--"+a).addClass("wcsdm-hidden")});var e=_.mapObject(wcsdm_backend,function(e,t){switch(t){case"default_lat":case"default_lng":case"test_destination_lat":case"test_destination_lng":return parseFloat(e);default:return e}});d.init(e),p.init(e),n()},maybeOpenModal:function(){wcsdm_backend.showSettings&&setTimeout(function(){for(var e=!1,t=r(document).find(".wc-shipping-zone-method-type"),a=0;a<t.length;a++){var o=t[a];if(r(o).text()===wcsdm_backend.methodTitle)return r(o).closest("tr").find(".row-actions .wc-shipping-zone-method-settings").trigger("click"),void(e=!0)}e||(r(".wc-shipping-zone-add-method").trigger("click"),r('select[name="add_method_id"]').val(wcsdm_backend.methodId).trigger("change"))},500)},submitForm:function(e){e.preventDefault(),r("#btn-ok").trigger("click")},showApiKeyInstructions:function(e){e.preventDefault(),n({left:{id:"close-instructions",label:"Back",icon:"undo"},right:{id:"get-api-key",label:"Get API Key",icon:"admin-links"}}),r("#wcsdm-field-group-wrap--api_key_instruction").fadeIn().siblings().hide(),r(".modal-close-link").hide()},closeApiKeyInstructions:function(e){e.preventDefault(),r("#wcsdm-field-group-wrap--api_key_instruction").hide().siblings().not(".wcsdm-hidden").fadeIn(),r(".modal-close-link").show(),n()},toggleStoreOriginFields:function(e){e.preventDefault();var a=r(this).val(),t=r(this).data("fields");_.each(t,function(e,t){_.each(e,function(e){t!==a?r("#"+e).closest("tr").hide():r("#"+e).closest("tr").show()})})},bindEvents:function(){r(document.body).off("wc_backbone_modal_loaded",t.initFrom),r(document.body).on("wc_backbone_modal_loaded",t.initFrom),r(document).off("click","#wcsdm-btn--save-settings",t.submitForm),r(document).on("click","#wcsdm-btn--save-settings",t.submitForm),r(document).off("click",".wcsdm-show-instructions",t.showApiKeyInstructions),r(document).on("click",".wcsdm-show-instructions",t.showApiKeyInstructions),r(document).off("click","#wcsdm-btn--close-instructions",t.closeApiKeyInstructions),r(document).on("click","#wcsdm-btn--close-instructions",t.closeApiKeyInstructions),r(document).off("change","#woocommerce_wcsdm_origin_type",t.toggleStoreOriginFields),r(document).on("change","#woocommerce_wcsdm_origin_type",t.toggleStoreOriginFields)},init:function(){t.bindEvents(),t.maybeOpenModal()}};r(document).ready(t.init)}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndjc2RtLWJhY2tlbmQubWluLmpzIl0sIm5hbWVzIjpbIiQiLCJ0b2dnbGVCb3R0b25zIiwiYXJncyIsImRhdGEiLCJsZWZ0QnV0dG9uIiwicmlnaHRCdXR0b24iLCJidXR0b25MYWJlbHMiLCJ3Y3NkbV9iYWNrZW5kIiwiaTE4biIsImJ1dHRvbnMiLCJsZWZ0QnV0dG9uRGVmYXVsdCIsImlkIiwiaWNvbiIsImxhYmVsIiwicmlnaHRCdXR0b25EZWZhdWx0Iiwic2VsZWN0ZWQiLCJfIiwiaGFzIiwiZGVmYXVsdHMiLCJsZWZ0IiwiYnRuX2xlZnQiLCJyaWdodCIsImJ0bl9yaWdodCIsImlzRW1wdHkiLCJnZXRCdXR0b24iLCJyZW1vdmUiLCJoaWRlIiwiYWZ0ZXIiLCJ3cCIsInRlbXBsYXRlIiwiaXNNYXBFcnJvciIsIndpbmRvd0NvbnNvbGVFcnJvciIsIndpbmRvdyIsImNvbnNvbGUiLCJlcnJvciIsImFyZ3VtZW50cyIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsImFsZXJ0IiwidHJpZ2dlciIsInZhbCIsIndjc2RtTWFwUGlja2VyIiwiYXBpS2V5QnJvd3NlciIsImFwcGx5IiwicGFyYW1zIiwib3JpZ2luX2xhdCIsIm9yaWdpbl9sbmciLCJvcmlnaW5fYWRkcmVzcyIsInpvb21MZXZlbCIsImluaXQiLCJkb2N1bWVudCIsIm9mZiIsImVkaXRBcGlLZXkiLCJvbiIsImVkaXRBcGlLZXlDYW5jZWwiLCJnZXRBcGlLZXkiLCJzaG93U3RvcmVMb2NhdGlvblBpY2tlciIsImhpZGVTdG9yZUxvY2F0aW9uUGlja2VyIiwiYXBwbHlTdG9yZUxvY2F0aW9uIiwidG9nZ2xlTWFwU2VhcmNoIiwiZSIsInByZXZlbnREZWZhdWx0IiwiJGxpbmsiLCJjdXJyZW50VGFyZ2V0IiwiJGxpbmtDYW5jZWwiLCJuZXh0IiwiJGlucHV0IiwiY2xvc2VzdCIsImZpbmQiLCIkaW5wdXREdW1teSIsIiRzcGlubmVyIiwiJGljb24iLCJhcGlLZXkiLCJhcGlLZXlEdW1teSIsImhhc0NsYXNzIiwibGVuZ3RoIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInByb3AiLCJ0b2dnbGVDbGFzcyIsInRvZ2dsZUNvbnRyb2xzIiwidGltZW91dCIsIiRkIiwiRGVmZXJyZWQiLCJjc3MiLCJzZXRUaW1lb3V0Iiwic2hvdyIsInJlc29sdmUiLCJwcm9taXNlIiwiYXR0ciIsImdvb2dsZSIsInVuZGVmaW5lZCIsImdldFNjcmlwdCIsInRoZW4iLCIkbGlua0VkaXQiLCJwcmV2IiwiJGljb25FZGl0Iiwib3BlbiIsImZvY3VzIiwiZmFkZUluIiwic2libGluZ3MiLCJpbml0TWFwIiwiZGVzdHJveU1hcCIsIm5vdCIsImRmZCIsIm9yaWdpbiIsImRlc3RpbmF0aW9uIiwid2hlbiIsImpRdWVyeSIsIm1hcHMiLCJMYXRMbmciLCJwYXJzZUZsb2F0IiwiZGVmYXVsdExhdCIsImRlZmF1bHRMbmciLCJ0ZXN0TGF0IiwidGVzdExuZyIsIkRpc3RhbmNlTWF0cml4U2VydmljZSIsImdldERpc3RhbmNlTWF0cml4Iiwib3JpZ2lucyIsImRlc3RpbmF0aW9ucyIsInRyYXZlbE1vZGUiLCJ1bml0U3lzdGVtIiwiVW5pdFN5c3RlbSIsIk1FVFJJQyIsInJlc3BvbnNlIiwic3RhdHVzIiwicmVqZWN0IiwiZW1wdHkiLCJzY3JpcHRVcmwiLCJyZW5kZXJNYXAiLCJjdXJyZW50TGF0TG5nIiwibGF0IiwibG5nIiwibWFwIiwiTWFwIiwiZ2V0RWxlbWVudEJ5SWQiLCJtYXBUeXBlSWQiLCJjZW50ZXIiLCJ6b29tIiwic3RyZWV0Vmlld0NvbnRyb2wiLCJtYXBUeXBlQ29udHJvbCIsIm1hcmtlciIsIk1hcmtlciIsInBvc2l0aW9uIiwiZHJhZ2dhYmxlIiwiaW5mb3dpbmRvdyIsIkluZm9XaW5kb3ciLCJtYXhXaWR0aCIsInNldENvbnRlbnQiLCJkcmFnX21hcmtlciIsInNldExhdExuZyIsImV2ZW50IiwiYWRkTGlzdGVuZXIiLCJjbG9zZSIsImxhdExuZyIsInByZXBlbmQiLCJjb250cm9scyIsIkNvbnRyb2xQb3NpdGlvbiIsIlRPUF9MRUZUIiwicHVzaCIsIm1hcFNlYXJjaEJveCIsInBsYWNlcyIsIlNlYXJjaEJveCIsInNldEJvdW5kcyIsImdldEJvdW5kcyIsIm1hcmtlcnMiLCJnZXRQbGFjZXMiLCJmb3JFYWNoIiwic2V0TWFwIiwiYm91bmRzIiwiTGF0TG5nQm91bmRzIiwicGxhY2UiLCJnZW9tZXRyeSIsImxvY2F0aW9uIiwidmlld3BvcnQiLCJ1bmlvbiIsImV4dGVuZCIsImxvZyIsImZpdEJvdW5kcyIsIkdlb2NvZGVyIiwiZ2VvY29kZSIsInJlc3VsdHMiLCJHZW9jb2RlclN0YXR1cyIsIk9LIiwiaW5mb3dpbmRvd0NvbnRlbnRzIiwibGF0aXR1ZGUiLCJ0b1N0cmluZyIsImxvbmdpdHVkZSIsImpvaW4iLCJmb3JtYXR0ZWRfYWRkcmVzcyIsInNldENlbnRlciIsIndjc2RtVGFibGVSYXRlcyIsImVycm9ySWQiLCJzaG93QWR2YW5jZWRSYXRlRm9ybSIsImNsb3NlQWR2YW5jZWRSYXRlRm9ybSIsImFwcGx5QWR2YW5jZWRGb3JtIiwiaGFuZGxlQWRkUmF0ZUJ1dHRvbiIsImRlbGV0ZVJhdGVSb3ciLCJkZWxldGVSYXRlUm93Q2FuY2VsIiwiZGVsZXRlUmF0ZVJvd0NvbmZpcm0iLCJ0b2dnbGVSb3dzIiwidG9nZ2xlUm93IiwiZnVuYyIsIndhaXQiLCJjb250ZXh0IiwidGhpcyIsImNsZWFyVGltZW91dCIsImRlYm91bmNlIiwiaGFuZGxlUmF0ZUZpZWxkRHVtbXkiLCJpbml0Rm9ybSIsImFkZFJhdGVSb3ciLCJpc1BybyIsImRpc3RhbmNlVW5pdFNlbGVjdGVkIiwiJGRpc3RhbmNlVW5pdEZpZWxkcyIsImVhY2giLCJ0YXJnZXRzIiwidGFyZ2V0IiwidGV4dCIsIiRmaWVsZCIsIiRyb3ciLCJ2YWx1ZSIsInNvcnRSYXRlUm93cyIsImluZGV4IiwiZmllbGQiLCJmaWVsZElkIiwic2Nyb2xsVG9UYWJsZVJhdGUiLCJoaWdobGlnaHRSb3ciLCIkbGFzdFJvdyIsImFwcGVuZCIsImZpZWxkVmFsdWUiLCJNYXRoIiwiY2VpbCIsInBhcnNlSW50Iiwicm93IiwidG9nZ2xlUm93U2VsZWN0ZWQiLCJpcyIsImlzQnVsa0NoZWNrZWQiLCJpc0NoZWNrZWQiLCJyb3dzIiwiZ2V0Iiwic29ydCIsImEiLCJiIiwidmFsdWVBRGlzdGFuY2UiLCJ2YWx1ZUJEaXN0YW5jZSIsImlzTmFOIiwiY2hpbGRyZW4iLCJzY3JvbGxUb3AiLCJvdXRlckhlaWdodCIsIndjc2RtQmFja2VuZCIsImluaXRGcm9tIiwidGFibGUiLCJmaWVsZEdyb3VwIiwiZmllbGRHcm91cElkIiwicmVwbGFjZSIsIiRmaWVsZEdyb3VwRGVzY3JpcHRpb24iLCJkZXRhY2giLCIkZmllbGRHcm91cFRhYmxlIiwibmV4dEFsbCIsImZpcnN0Iiwid3JhcCIsImFwcGVuZFRvIiwibWFwT2JqZWN0Iiwia2V5IiwibWF5YmVPcGVuTW9kYWwiLCJzaG93U2V0dGluZ3MiLCJpc01ldGhvZEFkZGVkIiwibWV0aG9kcyIsImkiLCJtZXRob2QiLCJtZXRob2RUaXRsZSIsIm1ldGhvZElkIiwic3VibWl0Rm9ybSIsInNob3dBcGlLZXlJbnN0cnVjdGlvbnMiLCJjbG9zZUFwaUtleUluc3RydWN0aW9ucyIsInRvZ2dsZVN0b3JlT3JpZ2luRmllbGRzIiwiZmllbGRzIiwiZmllbGRJZHMiLCJiaW5kRXZlbnRzIiwiYm9keSIsInJlYWR5Il0sIm1hcHBpbmdzIjoiQ0FBQyxTQUFTQSxHQUNWLGFBa01BLFNBQVNDLEVBQWNDLEdBR25CLElBQUlDLEVBS1IsU0FBbUJELEdBR2YsSUF1QklFLEVBQ0FDLEVBeEJBQyxFQUFlQyxjQUFjQyxLQUFLQyxRQU1sQ0MsRUFBb0IsQ0FDcEJDLEdBTHNCLFdBTXRCQyxLQUx3QixPQU14QkMsTUFMeUIsZ0JBWXpCQyxFQUFxQixDQUNyQkgsR0FKdUIsZ0JBS3ZCQyxLQU55QixNQU96QkMsTUFMMEIsZ0JBUTFCRSxFQUFXLEdBSVhDLEVBQUVDLElBQUlmLEVBQU0sVUFDWkUsRUFBYVksRUFBRUUsU0FBU2hCLEVBQUtpQixLQUFNVCxH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U0FBVSxpQ0FBa0NzTSxFQUFhMEIseUJBQ3pFblIsRUFBRWtELFVBQVVHLEdBQUcsU0FBVSxpQ0FBa0NvTSxFQUFhMEIsMEJBRTVFbE8sS0FBTSxXQUNGd00sRUFBYTZCLGFBQ2I3QixFQUFhZSxtQkFJckJ4USxFQUFFa0QsVUFBVXNPLE1BQU0vQixFQUFheE0sTUFsckMvQixDQW1yQ0UyRCIsImZpbGUiOiJ3Y3NkbS1iYWNrZW5kLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuLy8gTiBtaWxsaXNlY29uZHMuXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0KSB7XG4gICAgdmFyIHRpbWVvdXQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICB9O1xufVxuXG4vKipcbiAqIFJlcGxhY2UgdGhlIHBlcmNlbnQgKCUpIHNpZ24gYnkgYSB2YXJpYWJsZSBwYXNzZWQgYXMgYW4gYXJndW1lbnRcbiAqIHNpbWlsYXIgdG8gc3ByaW50ZiBmdW5jdGlvbiBpbiBQSFBcbiAqXG4gKiBAc2VlOiBodHRwOi8vbG9jdXR1cy5pby9waHAvc3RyaW5ncy9zcHJpbnRmL1xuICovXG5mdW5jdGlvbiBzcHJpbnRmKCkge1xuICAgIHZhciByZWdleCA9IC8lJXwlKD86KFxcZCspXFwkKT8oKD86Wy0rIzAgXXwnW1xcc1xcU10pKikoXFxkKyk/KD86XFwuKFxcZCopKT8oW1xcc1xcU10pL2c7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBmb3JtYXQgPSBhcmdzW2krK107XG5cbiAgICB2YXIgX3BhZCA9IGZ1bmN0aW9uIChzdHIsIGxlbiwgY2hyLCBsZWZ0SnVzdGlmeSkge1xuICAgICAgICBpZiAoIWNocikge1xuICAgICAgICAgICAgY2hyID0gJyAnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYWRkaW5nID0gKHN0ci5sZW5ndGggPj0gbGVuKSA/ICcnIDogbmV3IEFycmF5KDEgKyBsZW4gLSBzdHIubGVuZ3RoID4+PiAwKS5qb2luKGNocik7XG4gICAgICAgIHJldHVybiBsZWZ0SnVzdGlmeSA/IHN0ciArIHBhZGRpbmcgOiBwYWRkaW5nICsgc3RyO1xuICAgIH07XG5cbiAgICB2YXIganVzdGlmeSA9IGZ1bmN0aW9uICh2YWx1ZSwgcHJlZml4LCBsZWZ0SnVzdGlmeSwgbWluV2lkdGgsIHBhZENoYXIpIHtcbiAgICAgICAgdmFyIGRpZmYgPSBtaW5XaWR0aCAtIHZhbHVlLmxlbmd0aDtcbiAgICAgICAgaWYgKGRpZmYgPiAwKSB7XG4gICAgICAgICAgICAvLyB3aGVuIHBhZGRpbmcgd2l0aCB6ZXJvc1xuICAgICAgICAgICAgLy8gb24gdGhlIGxlZnQgc2lkZVxuICAgICAgICAgICAgLy8ga2VlcCBzaWduICgrIG9yIC0pIGluIGZyb250XG4gICAgICAgICAgICBpZiAoIWxlZnRKdXN0aWZ5ICYmIHBhZENoYXIgPT09ICcwJykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gW1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zbGljZSgwLCBwcmVmaXgubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgX3BhZCgnJywgZGlmZiwgJzAnLCB0cnVlKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuc2xpY2UocHJlZml4Lmxlbmd0aClcbiAgICAgICAgICAgICAgICBdLmpvaW4oJycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IF9wYWQodmFsdWUsIG1pbldpZHRoLCBwYWRDaGFyLCBsZWZ0SnVzdGlmeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcblxuICAgIHZhciBfZm9ybWF0QmFzZVggPSBmdW5jdGlvbiAodmFsdWUsIGJhc2UsIGxlZnRKdXN0aWZ5LCBtaW5XaWR0aCwgcHJlY2lzaW9uLCBwYWRDaGFyKSB7XG4gICAgICAgIC8vIE5vdGU6IGNhc3RzIG5lZ2F0aXZlIG51bWJlcnMgdG8gcG9zaXRpdmUgb25lc1xuICAgICAgICB2YXIgbnVtYmVyID0gdmFsdWUgPj4+IDA7XG4gICAgICAgIHZhbHVlID0gX3BhZChudW1iZXIudG9TdHJpbmcoYmFzZSksIHByZWNpc2lvbiB8fCAwLCAnMCcsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIGp1c3RpZnkodmFsdWUsICcnLCBsZWZ0SnVzdGlmeSwgbWluV2lkdGgsIHBhZENoYXIpO1xuICAgIH07XG5cbiAgICAvLyBfZm9ybWF0U3RyaW5nKClcbiAgICB2YXIgX2Zvcm1hdFN0cmluZyA9IGZ1bmN0aW9uICh2YWx1ZSwgbGVmdEp1c3RpZnksIG1pbldpZHRoLCBwcmVjaXNpb24sIGN1c3RvbVBhZENoYXIpIHtcbiAgICAgICAgaWYgKHByZWNpc2lvbiAhPT0gbnVsbCAmJiBwcmVjaXNpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCBwcmVjaXNpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBqdXN0aWZ5KHZhbHVlLCAnJywgbGVmdEp1c3RpZnksIG1pbldpZHRoLCBjdXN0b21QYWRDaGFyKTtcbiAgICB9O1xuXG4gICAgLy8gZG9Gb3JtYXQoKVxuICAgIHZhciBkb0Zvcm1hdCA9IGZ1bmN0aW9uIChzdWJzdHJpbmcsIGFyZ0luZGV4LCBtb2RpZmllcnMsIG1pbldpZHRoLCBwcmVjaXNpb24sIHNwZWNpZmllcikge1xuICAgICAgICB2YXIgbnVtYmVyO1xuICAgICAgICB2YXIgcHJlZml4O1xuICAgICAgICB2YXIgbWV0aG9kO1xuICAgICAgICB2YXIgdGV4dFRyYW5zZm9ybTtcbiAgICAgICAgdmFyIHZhbHVlO1xuXG4gICAgICAgIGlmIChzdWJzdHJpbmcgPT09ICclJScpIHtcbiAgICAgICAgICAgIHJldHVybiAnJSc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwYXJzZSBtb2RpZmllcnNcbiAgICAgICAgdmFyIHBhZENoYXIgPSAnICc7IC8vIHBhZCB3aXRoIHNwYWNlcyBieSBkZWZhdWx0XG4gICAgICAgIHZhciBsZWZ0SnVzdGlmeSA9IGZhbHNlO1xuICAgICAgICB2YXIgcG9zaXRpdmVOdW1iZXJQcmVmaXggPSAnJztcbiAgICAgICAgdmFyIGosIGw7XG5cbiAgICAgICAgZm9yIChqID0gMCwgbCA9IG1vZGlmaWVycy5sZW5ndGg7IGogPCBsOyBqKyspIHtcbiAgICAgICAgICAgIHN3aXRjaCAobW9kaWZpZXJzLmNoYXJBdChqKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJyAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJzAnOlxuICAgICAgICAgICAgICAgICAgICBwYWRDaGFyID0gbW9kaWZpZXJzLmNoYXJBdChqKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnKyc6XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aXZlTnVtYmVyUHJlZml4ID0gJysnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICctJzpcbiAgICAgICAgICAgICAgICAgICAgbGVmdEp1c3RpZnkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdcXCcnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoaiArIDEgPCBsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRDaGFyID0gbW9kaWZpZXJzLmNoYXJBdChqICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW1pbldpZHRoKSB7XG4gICAgICAgICAgICBtaW5XaWR0aCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtaW5XaWR0aCA9ICttaW5XaWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNGaW5pdGUobWluV2lkdGgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dpZHRoIG11c3QgYmUgZmluaXRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXByZWNpc2lvbikge1xuICAgICAgICAgICAgcHJlY2lzaW9uID0gKHNwZWNpZmllciA9PT0gJ2QnKSA/IDAgOiAnZkZlRScuaW5kZXhPZihzcGVjaWZpZXIpID4gLTEgPyA2IDogdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJlY2lzaW9uID0gK3ByZWNpc2lvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhcmdJbmRleCAmJiArYXJnSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXJndW1lbnQgbnVtYmVyIG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhcmdJbmRleCAmJiArYXJnSW5kZXggPj0gYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vIGZldyBhcmd1bWVudHMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhbHVlID0gYXJnSW5kZXggPyBhcmdzWythcmdJbmRleF0gOiBhcmdzW2krK107XG5cbiAgICAgICAgc3dpdGNoIChzcGVjaWZpZXIpIHtcbiAgICAgICAgICAgIGNhc2UgJyUnOlxuICAgICAgICAgICAgICAgIHJldHVybiAnJSc7XG4gICAgICAgICAgICBjYXNlICdzJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2Zvcm1hdFN0cmluZyh2YWx1ZSArICcnLCBsZWZ0SnVzdGlmeSwgbWluV2lkdGgsIHByZWNpc2lvbiwgcGFkQ2hhcik7XG4gICAgICAgICAgICBjYXNlICdjJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2Zvcm1hdFN0cmluZyhTdHJpbmcuZnJvbUNoYXJDb2RlKCt2YWx1ZSksIGxlZnRKdXN0aWZ5LCBtaW5XaWR0aCwgcHJlY2lzaW9uLCBwYWRDaGFyKTtcbiAgICAgICAgICAgIGNhc2UgJ2InOlxuICAgICAgICAgICAgICAgIHJldHVybiBfZm9ybWF0QmFzZVgodmFsdWUsIDIsIGxlZnRKdXN0aWZ5LCBtaW5XaWR0aCwgcHJlY2lzaW9uLCBwYWRDaGFyKTtcbiAgICAgICAgICAgIGNhc2UgJ28nOlxuICAgICAgICAgICAgICAgIHJldHVybiBfZm9ybWF0QmFzZVgodmFsdWUsIDgsIGxlZnRKdXN0aWZ5LCBtaW5XaWR0aCwgcHJlY2lzaW9uLCBwYWRDaGFyKTtcbiAgICAgICAgICAgIGNhc2UgJ3gnOlxuICAgICAgICAgICAgICAgIHJldHVybiBfZm9ybWF0QmFzZVgodmFsdWUsIDE2LCBsZWZ0SnVzdGlmeSwgbWluV2lkdGgsIHByZWNpc2lvbiwgcGFkQ2hhcik7XG4gICAgICAgICAgICBjYXNlICdYJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2Zvcm1hdEJhc2VYKHZhbHVlLCAxNiwgbGVmdEp1c3RpZnksIG1pbldpZHRoLCBwcmVjaXNpb24sIHBhZENoYXIpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICBjYXNlICd1JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2Zvcm1hdEJhc2VYKHZhbHVlLCAxMCwgbGVmdEp1c3RpZnksIG1pbldpZHRoLCBwcmVjaXNpb24sIHBhZENoYXIpO1xuICAgICAgICAgICAgY2FzZSAnaSc6XG4gICAgICAgICAgICBjYXNlICdkJzpcbiAgICAgICAgICAgICAgICBudW1iZXIgPSArdmFsdWUgfHwgMDtcbiAgICAgICAgICAgICAgICAvLyBQbGFpbiBNYXRoLnJvdW5kIGRvZXNuJ3QganVzdCB0cnVuY2F0ZVxuICAgICAgICAgICAgICAgIG51bWJlciA9IE1hdGgucm91bmQobnVtYmVyIC0gbnVtYmVyICUgMSk7XG4gICAgICAgICAgICAgICAgcHJlZml4ID0gbnVtYmVyIDwgMCA/ICctJyA6IHBvc2l0aXZlTnVtYmVyUHJlZml4O1xuICAgICAgICAgICAgICAgIHZhbHVlID0gcHJlZml4ICsgX3BhZChTdHJpbmcoTWF0aC5hYnMobnVtYmVyKSksIHByZWNpc2lvbiwgJzAnLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAobGVmdEp1c3RpZnkgJiYgcGFkQ2hhciA9PT0gJzAnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbid0IHJpZ2h0LXBhZCAwcyBvbiBpbnRlZ2Vyc1xuICAgICAgICAgICAgICAgICAgICBwYWRDaGFyID0gJyAnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4ganVzdGlmeSh2YWx1ZSwgcHJlZml4LCBsZWZ0SnVzdGlmeSwgbWluV2lkdGgsIHBhZENoYXIpO1xuICAgICAgICAgICAgY2FzZSAnZSc6XG4gICAgICAgICAgICBjYXNlICdFJzpcbiAgICAgICAgICAgIGNhc2UgJ2YnOiAvLyBAdG9kbzogU2hvdWxkIGhhbmRsZSBsb2NhbGVzIChhcyBwZXIgc2V0bG9jYWxlKVxuICAgICAgICAgICAgY2FzZSAnRic6XG4gICAgICAgICAgICBjYXNlICdnJzpcbiAgICAgICAgICAgIGNhc2UgJ0cnOlxuICAgICAgICAgICAgICAgIG51bWJlciA9ICt2YWx1ZTtcbiAgICAgICAgICAgICAgICBwcmVmaXggPSBudW1iZXIgPCAwID8gJy0nIDogcG9zaXRpdmVOdW1iZXJQcmVmaXg7XG4gICAgICAgICAgICAgICAgbWV0aG9kID0gWyd0b0V4cG9uZW50aWFsJywgJ3RvRml4ZWQnLCAndG9QcmVjaXNpb24nXVsnZWZnJy5pbmRleE9mKHNwZWNpZmllci50b0xvd2VyQ2FzZSgpKV07XG4gICAgICAgICAgICAgICAgdGV4dFRyYW5zZm9ybSA9IFsndG9TdHJpbmcnLCAndG9VcHBlckNhc2UnXVsnZUVmRmdHJy5pbmRleE9mKHNwZWNpZmllcikgJSAyXTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHByZWZpeCArIE1hdGguYWJzKG51bWJlcilbbWV0aG9kXShwcmVjaXNpb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiBqdXN0aWZ5KHZhbHVlLCBwcmVmaXgsIGxlZnRKdXN0aWZ5LCBtaW5XaWR0aCwgcGFkQ2hhcilbdGV4dFRyYW5zZm9ybV0oKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gdW5rbm93biBzcGVjaWZpZXIsIGNvbnN1bWUgdGhhdCBjaGFyIGFuZCByZXR1cm4gZW1wdHlcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKHJlZ2V4LCBkb0Zvcm1hdCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUJvdHRvbnMoYXJncykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkYXRhID0gZ2V0QnV0dG9uKGFyZ3MpO1xuICAgICQoJyN3Y3NkbS1idXR0b25zJykucmVtb3ZlKCk7XG4gICAgJCgnI2J0bi1vaycpLmhpZGUoKS5hZnRlcih3cC50ZW1wbGF0ZSgnd2NzZG0tYnV0dG9ucycpKGRhdGEpKTtcbn1cblxuZnVuY3Rpb24gZ2V0QnV0dG9uKGFyZ3MpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgYnV0dG9uTGFiZWxzID0gd2NzZG1fYmFja2VuZC5pMThuLmJ1dHRvbnM7XG5cbiAgICB2YXIgbGVmdEJ1dHRvbkRlZmF1bHRJZCA9ICdhZGQtcmF0ZSc7XG4gICAgdmFyIGxlZnRCdXR0b25EZWZhdWx0SWNvbiA9ICdwbHVzJztcbiAgICB2YXIgbGVmdEJ1dHRvbkRlZmF1bHRMYWJlbCA9ICdBZGQgTmV3IFJhdGUnO1xuXG4gICAgdmFyIGxlZnRCdXR0b25EZWZhdWx0ID0ge1xuICAgICAgICBpZDogbGVmdEJ1dHRvbkRlZmF1bHRJZCxcbiAgICAgICAgaWNvbjogbGVmdEJ1dHRvbkRlZmF1bHRJY29uLFxuICAgICAgICBsYWJlbDogbGVmdEJ1dHRvbkRlZmF1bHRMYWJlbFxuICAgIH07XG5cbiAgICB2YXIgcmlnaHRCdXR0b25EZWZhdWx0SWNvbiA9ICd5ZXMnO1xuICAgIHZhciByaWdodEJ1dHRvbkRlZmF1bHRJZCA9ICdzYXZlLXNldHRpbmdzJztcbiAgICB2YXIgcmlnaHRCdXR0b25EZWZhdWx0TGFiZWwgPSAnU2F2ZSBDaGFuZ2VzJztcblxuICAgIHZhciByaWdodEJ1dHRvbkRlZmF1bHQgPSB7XG4gICAgICAgIGlkOiByaWdodEJ1dHRvbkRlZmF1bHRJZCxcbiAgICAgICAgaWNvbjogcmlnaHRCdXR0b25EZWZhdWx0SWNvbixcbiAgICAgICAgbGFiZWw6IHJpZ2h0QnV0dG9uRGVmYXVsdExhYmVsXG4gICAgfTtcblxuICAgIHZhciBzZWxlY3RlZCA9IHt9O1xuICAgIHZhciBsZWZ0QnV0dG9uO1xuICAgIHZhciByaWdodEJ1dHRvbjtcblxuICAgIGlmIChfLmhhcyhhcmdzLCAnbGVmdCcpKSB7XG4gICAgICAgIGxlZnRCdXR0b24gPSBfLmRlZmF1bHRzKGFyZ3MubGVmdCwgbGVmdEJ1dHRvbkRlZmF1bHQpO1xuXG4gICAgICAgIGlmIChfLmhhcyhidXR0b25MYWJlbHMsIGxlZnRCdXR0b24ubGFiZWwpKSB7XG4gICAgICAgICAgICBsZWZ0QnV0dG9uLmxhYmVsID0gYnV0dG9uTGFiZWxzW2xlZnRCdXR0b24ubGFiZWxdO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0ZWQuYnRuX2xlZnQgPSBsZWZ0QnV0dG9uO1xuICAgIH1cblxuICAgIGlmIChfLmhhcyhhcmdzLCAncmlnaHQnKSkge1xuICAgICAgICByaWdodEJ1dHRvbiA9IF8uZGVmYXVsdHMoYXJncy5yaWdodCwgcmlnaHRCdXR0b25EZWZhdWx0KTtcblxuICAgICAgICBpZiAoXy5oYXMoYnV0dG9uTGFiZWxzLCByaWdodEJ1dHRvbi5sYWJlbCkpIHtcbiAgICAgICAgICAgIHJpZ2h0QnV0dG9uLmxhYmVsID0gYnV0dG9uTGFiZWxzW3JpZ2h0QnV0dG9uLmxhYmVsXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGVjdGVkLmJ0bl9yaWdodCA9IHJpZ2h0QnV0dG9uO1xuICAgIH1cblxuICAgIGlmIChfLmlzRW1wdHkoc2VsZWN0ZWQpKSB7XG4gICAgICAgIGxlZnRCdXR0b24gPSBfLmRlZmF1bHRzKHt9LCBsZWZ0QnV0dG9uRGVmYXVsdCk7XG5cbiAgICAgICAgaWYgKF8uaGFzKGJ1dHRvbkxhYmVscywgbGVmdEJ1dHRvbi5sYWJlbCkpIHtcbiAgICAgICAgICAgIGxlZnRCdXR0b24ubGFiZWwgPSBidXR0b25MYWJlbHNbbGVmdEJ1dHRvbi5sYWJlbF07XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3RlZC5idG5fbGVmdCA9IGxlZnRCdXR0b247XG5cbiAgICAgICAgcmlnaHRCdXR0b24gPSBfLmRlZmF1bHRzKHt9LCByaWdodEJ1dHRvbkRlZmF1bHQpO1xuXG4gICAgICAgIGlmIChfLmhhcyhidXR0b25MYWJlbHMsIHJpZ2h0QnV0dG9uLmxhYmVsKSkge1xuICAgICAgICAgICAgcmlnaHRCdXR0b24ubGFiZWwgPSBidXR0b25MYWJlbHNbcmlnaHRCdXR0b24ubGFiZWxdO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0ZWQuYnRuX3JpZ2h0ID0gcmlnaHRCdXR0b247XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGVjdGVkO1xufVxuXG4vLyBUYWtpbmcgT3ZlciB3aW5kb3cuY29uc29sZS5lcnJvclxudmFyIGlzTWFwRXJyb3IgPSBmYWxzZTtcblxudmFyIHdpbmRvd0NvbnNvbGVFcnJvciA9IHdpbmRvdy5jb25zb2xlLmVycm9yO1xud2luZG93LmNvbnNvbGUuZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFyZ3VtZW50c1swXS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2dvb2dsZScpICE9PSAxKSB7XG4gICAgICAgIGlzTWFwRXJyb3IgPSBhcmd1bWVudHNbMF07XG4gICAgICAgIHdpbmRvdy5hbGVydChpc01hcEVycm9yKTtcbiAgICAgICAgJCgnI2FwaV9rZXlfYnJvd3NlcicpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICQoJyN3b29jb21tZXJjZV93Y3NkbV9hcGlfa2V5X2Jyb3dzZXInKS52YWwod2NzZG1NYXBQaWNrZXIuYXBpS2V5QnJvd3Nlcik7XG4gICAgfVxuXG4gICAgd2luZG93Q29uc29sZUVycm9yLmFwcGx5KHdpbmRvd0NvbnNvbGVFcnJvciwgYXJndW1lbnRzKTtcbn07XG5cbi8qKlxuICogTWFwIFBpY2tlclxuICovXG52YXIgd2NzZG1NYXBQaWNrZXIgPSB7XG4gICAgcGFyYW1zOiB7fSxcbiAgICBvcmlnaW5fbGF0OiAnJyxcbiAgICBvcmlnaW5fbG5nOiAnJyxcbiAgICBvcmlnaW5fYWRkcmVzczogJycsXG4gICAgem9vbUxldmVsOiAxNixcbiAgICBhcGlLZXlCcm93c2VyOiAnJyxcbiAgICBpbml0OiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICB3Y3NkbU1hcFBpY2tlci5wYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gRWRpdCBBcGkgS2V5XG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2snLCAnLndjc2RtLWVkaXQtYXBpLWtleScsIHdjc2RtTWFwUGlja2VyLmVkaXRBcGlLZXkpO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLndjc2RtLWVkaXQtYXBpLWtleScsIHdjc2RtTWFwUGlja2VyLmVkaXRBcGlLZXkpO1xuXG4gICAgICAgIC8vIENhbmNlbCBFZGl0IEFwaSBLZXlcbiAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljaycsICcud2NzZG0tZWRpdC1hcGkta2V5LWNhbmNlbCcsIHdjc2RtTWFwUGlja2VyLmVkaXRBcGlLZXlDYW5jZWwpO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLndjc2RtLWVkaXQtYXBpLWtleS1jYW5jZWwnLCB3Y3NkbU1hcFBpY2tlci5lZGl0QXBpS2V5Q2FuY2VsKTtcblxuICAgICAgICAvLyBHZXQgQVBJIEtleVxuICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJyN3Y3NkbS1idG4tLWdldC1hcGkta2V5Jywgd2NzZG1NYXBQaWNrZXIuZ2V0QXBpS2V5KTtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN3Y3NkbS1idG4tLWdldC1hcGkta2V5Jywgd2NzZG1NYXBQaWNrZXIuZ2V0QXBpS2V5KTtcblxuICAgICAgICAvLyBTaG93IFN0b3JlIExvY2F0aW9uIFBpY2tlclxuICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJy53Y3NkbS1lZGl0LWxvY2F0aW9uJywgd2NzZG1NYXBQaWNrZXIuc2hvd1N0b3JlTG9jYXRpb25QaWNrZXIpO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLndjc2RtLWVkaXQtbG9jYXRpb24nLCB3Y3NkbU1hcFBpY2tlci5zaG93U3RvcmVMb2NhdGlvblBpY2tlcik7XG5cbiAgICAgICAgLy8gSGlkZSBTdG9yZSBMb2NhdGlvbiBQaWNrZXJcbiAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljaycsICcjd2NzZG0tYnRuLS1tYXAtY2FuY2VsJywgd2NzZG1NYXBQaWNrZXIuaGlkZVN0b3JlTG9jYXRpb25QaWNrZXIpO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3djc2RtLWJ0bi0tbWFwLWNhbmNlbCcsIHdjc2RtTWFwUGlja2VyLmhpZGVTdG9yZUxvY2F0aW9uUGlja2VyKTtcblxuICAgICAgICAvLyBBcHBseSBTdG9yZSBMb2NhdGlvblxuICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJyN3Y3NkbS1idG4tLW1hcC1hcHBseScsIHdjc2RtTWFwUGlja2VyLmFwcGx5U3RvcmVMb2NhdGlvbik7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjd2NzZG0tYnRuLS1tYXAtYXBwbHknLCB3Y3NkbU1hcFBpY2tlci5hcHBseVN0b3JlTG9jYXRpb24pO1xuXG4gICAgICAgIC8vIFRvZ2dsZSBNYXAgU2VhcmNoIFBhbmVsXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2snLCAnI3djc2RtLW1hcC1zZWFyY2gtcGFuZWwtdG9nZ2xlJywgd2NzZG1NYXBQaWNrZXIudG9nZ2xlTWFwU2VhcmNoKTtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN3Y3NkbS1tYXAtc2VhcmNoLXBhbmVsLXRvZ2dsZScsIHdjc2RtTWFwUGlja2VyLnRvZ2dsZU1hcFNlYXJjaCk7XG4gICAgfSxcbiAgICBlZGl0QXBpS2V5OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciAkbGluayA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgdmFyICRsaW5rQ2FuY2VsID0gJGxpbmsubmV4dCgnYScpO1xuICAgICAgICB2YXIgJGlucHV0ID0gJGxpbmsuY2xvc2VzdCgndHInKS5maW5kKCdpbnB1dFt0eXBlPWhpZGRlbl0nKTtcbiAgICAgICAgdmFyICRpbnB1dER1bW15ID0gJGxpbmsuY2xvc2VzdCgndHInKS5maW5kKCdpbnB1dFt0eXBlPXRleHRdJyk7XG4gICAgICAgIHZhciAkc3Bpbm5lciA9ICRsaW5rLmNsb3Nlc3QoJ3RyJykuZmluZCgnLnNwaW5uZXInKTtcbiAgICAgICAgdmFyICRpY29uID0gJGxpbmsuZmluZCgnLmRhc2hpY29ucycpO1xuXG4gICAgICAgIHZhciBhcGlLZXkgPSAkaW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBhcGlLZXlEdW1teSA9ICRpbnB1dER1bW15LnZhbCgpO1xuXG4gICAgICAgIGlmICgkbGluay5oYXNDbGFzcygnZWRpdGluZycpKSB7XG4gICAgICAgICAgICBpZiAoIWFwaUtleUR1bW15Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJGxpbmtDYW5jZWwuYWRkQ2xhc3MoJ3djc2RtLWhpZGRlbicpO1xuICAgICAgICAgICAgJGxpbmsucmVtb3ZlQ2xhc3MoJ2VkaXRpbmcnKTtcbiAgICAgICAgICAgICRpbnB1dER1bW15LnByb3AoJ3JlYWRvbmx5JywgdHJ1ZSk7XG4gICAgICAgICAgICAkaWNvbi50b2dnbGVDbGFzcygnZGFzaGljb25zLWVkaXQnKS50b2dnbGVDbGFzcygnZGFzaGljb25zLXllcycpO1xuXG4gICAgICAgICAgICB2YXIgdG9nZ2xlQ29udHJvbHMgPSBmdW5jdGlvbiAodGltZW91dCkge1xuICAgICAgICAgICAgICAgIHZhciAkZCA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICAkbGluay5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJHNwaW5uZXIuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAkKCcud2NzZG0tYnV0dG9ucy1pdGVtLC53Y3NkbS1saW5rJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKS5jc3MoJ29wYWNpdHknLCAwLjUpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRsaW5rLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJHNwaW5uZXIuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICAkKCcud2NzZG0tYnV0dG9ucy1pdGVtLC53Y3NkbS1saW5rJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSkuY3NzKCdvcGFjaXR5JywgMSk7XG4gICAgICAgICAgICAgICAgICAgICRkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJGQucHJvbWlzZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgc3dpdGNoICgkbGluay5hdHRyKCdpZCcpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXBpX2tleV9icm93c2VyJzoge1xuICAgICAgICAgICAgICAgICAgICB3Y3NkbU1hcFBpY2tlci5hcGlLZXlCcm93c2VyID0gJGlucHV0LnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFVuc2V0IGN1cnJlbnQgZ29vZ2xlIGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5nb29nbGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGlzTWFwRXJyb3IgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAkLmdldFNjcmlwdCgnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP2xpYnJhcmllcz1nZW9tZXRyeSxwbGFjZXMma2V5PScgKyBhcGlLZXlEdW1teSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ29udHJvbHMoNTAwMCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc01hcEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnB1dC52YWwoYXBpS2V5RHVtbXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ29udHJvbHMoNTAwKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbnB1dC52YWwoYXBpS2V5RHVtbXkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbGluay5zaG93KCkuYWRkQ2xhc3MoJ2VkaXRpbmcnKTtcbiAgICAgICAgICAgICRsaW5rQ2FuY2VsLnJlbW92ZUNsYXNzKCd3Y3NkbS1oaWRkZW4nKTtcbiAgICAgICAgICAgICRpY29uLnRvZ2dsZUNsYXNzKCdkYXNoaWNvbnMtZWRpdCcpLnRvZ2dsZUNsYXNzKCdkYXNoaWNvbnMteWVzJyk7XG4gICAgICAgICAgICAkaW5wdXREdW1teS5wcm9wKCdyZWFkb25seScsIGZhbHNlKS52YWwoYXBpS2V5KTtcbiAgICAgICAgICAgICRzcGlubmVyLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZWRpdEFwaUtleUNhbmNlbDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB2YXIgJGxpbmsgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICAgIHZhciAkbGlua0VkaXQgPSAkbGluay5wcmV2KCdhJyk7XG4gICAgICAgIHZhciAkaWNvbkVkaXQgPSAkbGlua0VkaXQuZmluZCgnLmRhc2hpY29ucycpO1xuICAgICAgICB2YXIgJGlucHV0ID0gJGxpbmsuY2xvc2VzdCgndHInKS5maW5kKCdpbnB1dFt0eXBlPWhpZGRlbl0nKTtcbiAgICAgICAgdmFyICRpbnB1dER1bW15ID0gJGxpbmsuY2xvc2VzdCgndHInKS5maW5kKCdpbnB1dFt0eXBlPXRleHRdJyk7XG5cbiAgICAgICAgJGxpbmsuYWRkQ2xhc3MoJ3djc2RtLWhpZGRlbicpO1xuICAgICAgICAkbGlua0VkaXQucmVtb3ZlQ2xhc3MoJ2VkaXRpbmcnKTtcbiAgICAgICAgJGljb25FZGl0LnRvZ2dsZUNsYXNzKCdkYXNoaWNvbnMteWVzJykudG9nZ2xlQ2xhc3MoJ2Rhc2hpY29ucy1lZGl0Jyk7XG4gICAgICAgICRpbnB1dER1bW15LnByb3AoJ3JlYWRvbmx5JywgdHJ1ZSkudmFsKCRpbnB1dC52YWwoKSk7XG4gICAgICAgIGlmICgkaW5wdXQudmFsKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICBpc01hcEVycm9yID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGdldEFwaUtleTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL21hcHMtcGxhdGZvcm0vI2dldC1zdGFydGVkJywgJ19ibGFuaycpLmZvY3VzKCk7XG4gICAgfSxcbiAgICBzaG93U3RvcmVMb2NhdGlvblBpY2tlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoaXNNYXBFcnJvcikge1xuICAgICAgICAgICAgd2luZG93LmFsZXJ0KGlzTWFwRXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnLm1vZGFsLWNsb3NlLWxpbmsnKS5oaWRlKCk7XG5cbiAgICAgICAgdG9nZ2xlQm90dG9ucyh7XG4gICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgaWQ6ICdtYXAtY2FuY2VsJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0NhbmNlbCcsXG4gICAgICAgICAgICAgICAgaWNvbjogJ3VuZG8nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmlnaHQ6IHtcbiAgICAgICAgICAgICAgICBpZDogJ21hcC1hcHBseScsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdBcHBseSBDaGFuZ2VzJyxcbiAgICAgICAgICAgICAgICBpY29uOiAnZWRpdG9yLXNwZWxsY2hlY2snXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJyN3Y3NkbS1maWVsZC1ncm91cC13cmFwLS1sb2NhdGlvbl9waWNrZXInKS5mYWRlSW4oKS5zaWJsaW5ncygpLmhpZGUoKTtcblxuICAgICAgICB3Y3NkbU1hcFBpY2tlci5pbml0TWFwKCk7XG4gICAgfSxcbiAgICBoaWRlU3RvcmVMb2NhdGlvblBpY2tlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB3Y3NkbU1hcFBpY2tlci5kZXN0cm95TWFwKCk7XG5cbiAgICAgICAgJCgnLm1vZGFsLWNsb3NlLWxpbmsnKS5zaG93KCk7XG5cbiAgICAgICAgdG9nZ2xlQm90dG9ucygpO1xuXG4gICAgICAgICQoJyN3Y3NkbS1maWVsZC1ncm91cC13cmFwLS1sb2NhdGlvbl9waWNrZXInKS5oaWRlKCkuc2libGluZ3MoKS5ub3QoJy53Y3NkbS1oaWRkZW4nKS5mYWRlSW4oKTtcbiAgICB9LFxuICAgIGFwcGx5U3RvcmVMb2NhdGlvbjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoaXNNYXBFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFwaUtleSA9ICQoJyN3b29jb21tZXJjZV93Y3NkbV9hcGlfa2V5X2Jyb3dzZXInKS52YWwoKTtcbiAgICAgICAgaWYgKF8uaXNFbXB0eShhcGlLZXkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdGVzdERpc3RhbmNlTWF0cml4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRmZCA9IGpRdWVyeS5EZWZlcnJlZCgpO1xuXG4gICAgICAgICAgICB2YXIgb3JpZ2luID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhwYXJzZUZsb2F0KHdjc2RtTWFwUGlja2VyLnBhcmFtcy5kZWZhdWx0TGF0KSwgcGFyc2VGbG9hdCh3Y3NkbU1hcFBpY2tlci5wYXJhbXMuZGVmYXVsdExuZykpO1xuICAgICAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhwYXJzZUZsb2F0KHdjc2RtTWFwUGlja2VyLnBhcmFtcy50ZXN0TGF0KSwgcGFyc2VGbG9hdCh3Y3NkbU1hcFBpY2tlci5wYXJhbXMudGVzdExuZykpO1xuICAgICAgICAgICAgdmFyIHNlcnZpY2UgPSBuZXcgZ29vZ2xlLm1hcHMuRGlzdGFuY2VNYXRyaXhTZXJ2aWNlKCk7XG4gICAgICAgICAgICBzZXJ2aWNlLmdldERpc3RhbmNlTWF0cml4KFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luczogW29yaWdpbl0sXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uczogW2Rlc3RpbmF0aW9uXSxcbiAgICAgICAgICAgICAgICAgICAgdHJhdmVsTW9kZTogJ0RSSVZJTkcnLFxuICAgICAgICAgICAgICAgICAgICB1bml0U3lzdGVtOiBnb29nbGUubWFwcy5Vbml0U3lzdGVtLk1FVFJJQ1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSwgc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gJ29rJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGZkLnJlc29sdmUoc3RhdHVzLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZmQucmVqZWN0KHN0YXR1cywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZmQucHJvbWlzZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgICQud2hlbih0ZXN0RGlzdGFuY2VNYXRyaXgoKSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICdvaycgJiYgIWlzTWFwRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3dvb2NvbW1lcmNlX3djc2RtX29yaWdpbl9sYXQnKS52YWwod2NzZG1NYXBQaWNrZXIub3JpZ2luX2xhdCk7XG4gICAgICAgICAgICAgICAgICAgICQoJyN3b29jb21tZXJjZV93Y3NkbV9vcmlnaW5fbG5nJykudmFsKHdjc2RtTWFwUGlja2VyLm9yaWdpbl9sbmcpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjd29vY29tbWVyY2Vfd2NzZG1fb3JpZ2luX2FkZHJlc3MnKS52YWwod2NzZG1NYXBQaWNrZXIub3JpZ2luX2FkZHJlc3MpO1xuICAgICAgICAgICAgICAgICAgICB3Y3NkbU1hcFBpY2tlci5oaWRlU3RvcmVMb2NhdGlvblBpY2tlcihlKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlzTWFwRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KGlzTWFwRXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoc3RhdHVzKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0sXG4gICAgdG9nZ2xlTWFwU2VhcmNoOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICQoZS5jdXJyZW50VGFyZ2V0KS5maW5kKCdzcGFuJykudG9nZ2xlQ2xhc3MoJ2Rhc2hpY29ucy1zZWFyY2gnKS50b2dnbGVDbGFzcygnZGFzaGljb25zLWRpc21pc3MnKTtcblxuICAgICAgICAkKCcjd2NzZG0tbWFwLXNlYXJjaC1wYW5lbCcpLnRvZ2dsZUNsYXNzKCdoaWRlLW1haW4nKTtcbiAgICAgICAgJCgnI3djc2RtLW1hcC1zZWFyY2gtcGFuZWwtbWFpbicpLnRvZ2dsZUNsYXNzKCd3Y3NkbS1oaWRkZW4nKTtcbiAgICB9LFxuICAgIGRlc3Ryb3lNYXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93Lmdvb2dsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgJCgnI3djc2RtLW1hcC1jYW52YXMnKS5lbXB0eSgpO1xuICAgICAgICAkKCcjd2NzZG0tbWFwLXNlYXJjaC1wYW5lbCcpLnJlbW92ZSgpO1xuICAgIH0sXG4gICAgaW5pdE1hcDogZnVuY3Rpb24gKCkge1xuICAgICAgICB3Y3NkbU1hcFBpY2tlci5kZXN0cm95TWFwKCk7XG5cbiAgICAgICAgaXNNYXBFcnJvciA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBhcGlLZXkgPSAkKCcjd29vY29tbWVyY2Vfd2NzZG1fYXBpX2tleV9icm93c2VyJykudmFsKCk7XG5cbiAgICAgICAgaWYgKF8uaXNFbXB0eShhcGlLZXkpKSB7XG4gICAgICAgICAgICBhcGlLZXkgPSAnSW52YWxpZEtleSc7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2NyaXB0VXJsID0gJ2h0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9qcz9saWJyYXJpZXM9Z2VvbWV0cnkscGxhY2VzJmtleT0nICsgYXBpS2V5O1xuICAgICAgICAkLmdldFNjcmlwdChzY3JpcHRVcmwsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdjc2RtTWFwUGlja2VyLnJlbmRlck1hcCgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHJlbmRlck1hcDogZnVuY3Rpb24gKCkge1xuICAgICAgICB3Y3NkbU1hcFBpY2tlci5vcmlnaW5fbGF0ID0gJCgnI3dvb2NvbW1lcmNlX3djc2RtX29yaWdpbl9sYXQnKS52YWwoKTtcbiAgICAgICAgd2NzZG1NYXBQaWNrZXIub3JpZ2luX2xuZyA9ICQoJyN3b29jb21tZXJjZV93Y3NkbV9vcmlnaW5fbG5nJykudmFsKCk7XG5cbiAgICAgICAgdmFyIGN1cnJlbnRMYXRMbmcgPSB7XG4gICAgICAgICAgICBsYXQ6IF8uaXNFbXB0eSh3Y3NkbU1hcFBpY2tlci5vcmlnaW5fbGF0KSA/IHBhcnNlRmxvYXQod2NzZG1NYXBQaWNrZXIucGFyYW1zLmRlZmF1bHRMYXQpIDogcGFyc2VGbG9hdCh3Y3NkbU1hcFBpY2tlci5vcmlnaW5fbGF0KSxcbiAgICAgICAgICAgIGxuZzogXy5pc0VtcHR5KHdjc2RtTWFwUGlja2VyLm9yaWdpbl9sbmcpID8gcGFyc2VGbG9hdCh3Y3NkbU1hcFBpY2tlci5wYXJhbXMuZGVmYXVsdExuZykgOiBwYXJzZUZsb2F0KHdjc2RtTWFwUGlja2VyLm9yaWdpbl9sbmcpXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2NzZG0tbWFwLWNhbnZhcycpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1hcFR5cGVJZDogJ3JvYWRtYXAnLFxuICAgICAgICAgICAgICAgIGNlbnRlcjogY3VycmVudExhdExuZyxcbiAgICAgICAgICAgICAgICB6b29tOiB3Y3NkbU1hcFBpY2tlci56b29tTGV2ZWwsXG4gICAgICAgICAgICAgICAgc3RyZWV0Vmlld0NvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1hcFR5cGVDb250cm9sOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAgICAgcG9zaXRpb246IGN1cnJlbnRMYXRMbmcsXG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICBpY29uOiB3Y3NkbU1hcFBpY2tlci5wYXJhbXMubWFya2VyXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBpbmZvd2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coeyBtYXhXaWR0aDogMzUwIH0pO1xuXG4gICAgICAgIGlmIChfLmlzRW1wdHkod2NzZG1NYXBQaWNrZXIub3JpZ2luX2xhdCkgfHwgXy5pc0VtcHR5KHdjc2RtTWFwUGlja2VyLm9yaWdpbl9sbmcpKSB7XG4gICAgICAgICAgICBpbmZvd2luZG93LnNldENvbnRlbnQod2NzZG1NYXBQaWNrZXIucGFyYW1zLmkxOG4uZHJhZ19tYXJrZXIpO1xuICAgICAgICAgICAgaW5mb3dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdjc2RtTWFwUGlja2VyLnNldExhdExuZyhtYXJrZXIucG9zaXRpb24sIG1hcmtlciwgbWFwLCBpbmZvd2luZG93KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2RyYWdzdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGluZm93aW5kb3cuY2xvc2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnZHJhZ2VuZCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgd2NzZG1NYXBQaWNrZXIuc2V0TGF0TG5nKGV2ZW50LmxhdExuZywgbWFya2VyLCBtYXAsIGluZm93aW5kb3cpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcjd2NzZG0tbWFwLXdyYXAnKS5wcmVwZW5kKHdwLnRlbXBsYXRlKCd3Y3NkbS1tYXAtc2VhcmNoLXBhbmVsJykoKSk7XG4gICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uVE9QX0xFRlRdLnB1c2goZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3djc2RtLW1hcC1zZWFyY2gtcGFuZWwnKSk7XG5cbiAgICAgICAgdmFyIG1hcFNlYXJjaEJveCA9IG5ldyBnb29nbGUubWFwcy5wbGFjZXMuU2VhcmNoQm94KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3Y3NkbS1tYXAtc2VhcmNoLWlucHV0JykpO1xuXG4gICAgICAgIC8vIEJpYXMgdGhlIFNlYXJjaEJveCByZXN1bHRzIHRvd2FyZHMgY3VycmVudCBtYXAncyB2aWV3cG9ydC5cbiAgICAgICAgbWFwLmFkZExpc3RlbmVyKCdib3VuZHNfY2hhbmdlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG1hcFNlYXJjaEJveC5zZXRCb3VuZHMobWFwLmdldEJvdW5kcygpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIG1hcmtlcnMgPSBbXTtcblxuICAgICAgICAvLyBMaXN0ZW4gZm9yIHRoZSBldmVudCBmaXJlZCB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBwcmVkaWN0aW9uIGFuZCByZXRyaWV2ZSBtb3JlIGRldGFpbHMgZm9yIHRoYXQgcGxhY2UuXG4gICAgICAgIG1hcFNlYXJjaEJveC5hZGRMaXN0ZW5lcigncGxhY2VzX2NoYW5nZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGxhY2VzID0gbWFwU2VhcmNoQm94LmdldFBsYWNlcygpO1xuICAgICAgICAgICAgaWYgKHBsYWNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENsZWFyIG91dCB0aGUgb2xkIG1hcmtlcnMuXG4gICAgICAgICAgICBtYXJrZXJzLmZvckVhY2goZnVuY3Rpb24gKG1hcmtlcikge1xuICAgICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWFya2VycyA9IFtdO1xuXG4gICAgICAgICAgICAvLyBGb3IgZWFjaCBwbGFjZSwgZ2V0IHRoZSBpY29uLCBuYW1lIGFuZCBsb2NhdGlvbi5cbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKCk7XG5cbiAgICAgICAgICAgIHBsYWNlcy5mb3JFYWNoKGZ1bmN0aW9uIChwbGFjZSkge1xuICAgICAgICAgICAgICAgIGlmICghcGxhY2UuZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JldHVybmVkIHBsYWNlIGNvbnRhaW5zIG5vIGdlb21ldHJ5Jyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiB3Y3NkbU1hcFBpY2tlci5wYXJhbXMubWFya2VyXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB3Y3NkbU1hcFBpY2tlci5zZXRMYXRMbmcocGxhY2UuZ2VvbWV0cnkubG9jYXRpb24sIG1hcmtlciwgbWFwLCBpbmZvd2luZG93KTtcblxuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2RyYWdzdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5mb3dpbmRvdy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnZHJhZ2VuZCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICB3Y3NkbU1hcFBpY2tlci5zZXRMYXRMbmcoZXZlbnQubGF0TG5nLCBtYXJrZXIsIG1hcCwgaW5mb3dpbmRvdyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBtYXJrZXIgZm9yIGVhY2ggcGxhY2UuXG4gICAgICAgICAgICAgICAgbWFya2Vycy5wdXNoKG1hcmtlcik7XG5cbiAgICAgICAgICAgICAgICBpZiAocGxhY2UuZ2VvbWV0cnkudmlld3BvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSBnZW9jb2RlcyBoYXZlIHZpZXdwb3J0LlxuICAgICAgICAgICAgICAgICAgICBib3VuZHMudW5pb24ocGxhY2UuZ2VvbWV0cnkudmlld3BvcnQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJvdW5kcy5leHRlbmQocGxhY2UuZ2VvbWV0cnkubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtYXAuZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc2V0TGF0TG5nOiBmdW5jdGlvbiAobG9jYXRpb24sIG1hcmtlciwgbWFwLCBpbmZvd2luZG93KSB7XG4gICAgICAgIHZhciBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xuXG4gICAgICAgIGdlb2NvZGVyLmdlb2NvZGUoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGF0TG5nOiBsb2NhdGlvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5PSyAmJiByZXN1bHRzWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmZvd2luZG93Q29udGVudHMgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICB3Y3NkbU1hcFBpY2tlci5wYXJhbXMuaTE4bi5sYXRpdHVkZSArICc6ICcgKyBsb2NhdGlvbi5sYXQoKS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2NzZG1NYXBQaWNrZXIucGFyYW1zLmkxOG4ubG9uZ2l0dWRlICsgJzogJyArIGxvY2F0aW9uLmxuZygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgICAgICAgICBpbmZvd2luZG93LnNldENvbnRlbnQoaW5mb3dpbmRvd0NvbnRlbnRzLmpvaW4oJzxiciAvPicpKTtcbiAgICAgICAgICAgICAgICAgICAgaW5mb3dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKTtcblxuICAgICAgICAgICAgICAgICAgICBtYXJrZXIuYWRkTGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mb3dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnI3djc2RtLW1hcC1zZWFyY2gtaW5wdXQnKS52YWwocmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgd2NzZG1NYXBQaWNrZXIub3JpZ2luX2xhdCA9IGxvY2F0aW9uLmxhdCgpO1xuICAgICAgICAgICAgICAgICAgICB3Y3NkbU1hcFBpY2tlci5vcmlnaW5fbG5nID0gbG9jYXRpb24ubG5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHdjc2RtTWFwUGlja2VyLm9yaWdpbl9hZGRyZXNzID0gcmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgbWFwLnNldENlbnRlcihsb2NhdGlvbik7XG4gICAgfVxufTtcblxuLyoqXG4gKiBUYWJsZSBSYXRlc1xuICovXG52YXIgd2NzZG1UYWJsZVJhdGVzID0ge1xuICAgIHBhcmFtczoge30sXG4gICAgZXJyb3JJZDogJ3djc2RtLWVycm9ycy1yYXRlLWZpZWxkcycsXG4gICAgaW5pdDogZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIHdjc2RtVGFibGVSYXRlcy5wYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgLy8gU2hvdyBhZHZhbmNlZCByYXRlIGZvcm1cbiAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljaycsICcud2NzZG0tbGluay0tYWR2YW5jZWQtcmF0ZScsIHdjc2RtVGFibGVSYXRlcy5zaG93QWR2YW5jZWRSYXRlRm9ybSk7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcud2NzZG0tbGluay0tYWR2YW5jZWQtcmF0ZScsIHdjc2RtVGFibGVSYXRlcy5zaG93QWR2YW5jZWRSYXRlRm9ybSk7XG5cbiAgICAgICAgLy8gQ2xvc2UgYWR2YW5jZWQgcmF0ZSBmb3JtXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2snLCAnI3djc2RtLWJ0bi0tY2FuY2VsLWFkdmFuY2VkJywgd2NzZG1UYWJsZVJhdGVzLmNsb3NlQWR2YW5jZWRSYXRlRm9ybSk7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjd2NzZG0tYnRuLS1jYW5jZWwtYWR2YW5jZWQnLCB3Y3NkbVRhYmxlUmF0ZXMuY2xvc2VBZHZhbmNlZFJhdGVGb3JtKTtcblxuICAgICAgICAvLyBBcHBseSBhZHZhbmNlZCByYXRlXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2snLCAnI3djc2RtLWJ0bi0tYXBwbHktYWR2YW5jZWQnLCB3Y3NkbVRhYmxlUmF0ZXMuYXBwbHlBZHZhbmNlZEZvcm0pO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3djc2RtLWJ0bi0tYXBwbHktYWR2YW5jZWQnLCB3Y3NkbVRhYmxlUmF0ZXMuYXBwbHlBZHZhbmNlZEZvcm0pO1xuXG4gICAgICAgIC8vIEFkZCByYXRlIHJvd1xuICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJyN3Y3NkbS1idG4tLWFkZC1yYXRlJywgd2NzZG1UYWJsZVJhdGVzLmhhbmRsZUFkZFJhdGVCdXR0b24pO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3djc2RtLWJ0bi0tYWRkLXJhdGUnLCB3Y3NkbVRhYmxlUmF0ZXMuaGFuZGxlQWRkUmF0ZUJ1dHRvbik7XG5cbiAgICAgICAgLy8gRGVsZXRlIHJhdGUgcm93XG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2snLCAnI3djc2RtLWJ0bi0tZGVsZXRlLXJhdGUtc2VsZWN0Jywgd2NzZG1UYWJsZVJhdGVzLmRlbGV0ZVJhdGVSb3cpO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3djc2RtLWJ0bi0tZGVsZXRlLXJhdGUtc2VsZWN0Jywgd2NzZG1UYWJsZVJhdGVzLmRlbGV0ZVJhdGVSb3cpO1xuXG4gICAgICAgIC8vIENhbmNlbCBkZWxldGUgcmF0ZSByb3dcbiAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljaycsICcjd2NzZG0tYnRuLS1kZWxldGUtcmF0ZS1jYW5jZWwnLCB3Y3NkbVRhYmxlUmF0ZXMuZGVsZXRlUmF0ZVJvd0NhbmNlbCk7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjd2NzZG0tYnRuLS1kZWxldGUtcmF0ZS1jYW5jZWwnLCB3Y3NkbVRhYmxlUmF0ZXMuZGVsZXRlUmF0ZVJvd0NhbmNlbCk7XG5cbiAgICAgICAgLy8gQ29uZmlybSBkZWxldGUgcmF0ZSByb3dcbiAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljaycsICcjd2NzZG0tYnRuLS1kZWxldGUtcmF0ZS1jb25maXJtJywgd2NzZG1UYWJsZVJhdGVzLmRlbGV0ZVJhdGVSb3dDb25maXJtKTtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN3Y3NkbS1idG4tLWRlbGV0ZS1yYXRlLWNvbmZpcm0nLCB3Y3NkbVRhYmxlUmF0ZXMuZGVsZXRlUmF0ZVJvd0NvbmZpcm0pO1xuXG4gICAgICAgIC8vIFRvZ2dsZSBzZWxlY3RlZCByb3dzXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2hhbmdlJywgJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15IHRoZWFkIC5zZWxlY3QtaXRlbScsIHdjc2RtVGFibGVSYXRlcy50b2dnbGVSb3dzKTtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcjd2NzZG0tdGFibGUtLXRhYmxlX3JhdGVzLS1kdW1teSB0aGVhZCAuc2VsZWN0LWl0ZW0nLCB3Y3NkbVRhYmxlUmF0ZXMudG9nZ2xlUm93cyk7XG5cbiAgICAgICAgLy8gVG9nZ2xlIHNlbGVjdGVkIHJvd1xuICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NoYW5nZScsICcjd2NzZG0tdGFibGUtLXRhYmxlX3JhdGVzLS1kdW1teSB0Ym9keSAuc2VsZWN0LWl0ZW0nLCB3Y3NkbVRhYmxlUmF0ZXMudG9nZ2xlUm93KTtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcjd2NzZG0tdGFibGUtLXRhYmxlX3JhdGVzLS1kdW1teSB0Ym9keSAuc2VsZWN0LWl0ZW0nLCB3Y3NkbVRhYmxlUmF0ZXMudG9nZ2xlUm93KTtcblxuICAgICAgICAvLyBIYW5kbGUgY2hhbmdlIGV2ZW50IGR1bW15IHJhdGUgZmllbGRcbiAgICAgICAgJChkb2N1bWVudCkub2ZmKCdpbnB1dCcsICcud2NzZG0tZmllbGQtLWNvbnRleHQtLWR1bW15Om5vdChhKScpO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignaW5wdXQnLCAnLndjc2RtLWZpZWxkLS1jb250ZXh0LS1kdW1teTpub3QoYSknLCBkZWJvdW5jZShmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgd2NzZG1UYWJsZVJhdGVzLmhhbmRsZVJhdGVGaWVsZER1bW15KGUpO1xuICAgICAgICB9LCA1MDApKTtcblxuICAgICAgICAvLyBUb2dnbGUgc2VsZWN0ZWQgcm93XG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2hhbmdlJywgJyN3b29jb21tZXJjZV93Y3NkbV9kaXN0YW5jZV91bml0Jywgd2NzZG1UYWJsZVJhdGVzLmluaXRGb3JtKTtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcjd29vY29tbWVyY2Vfd2NzZG1fZGlzdGFuY2VfdW5pdCcsIHdjc2RtVGFibGVSYXRlcy5pbml0Rm9ybSk7XG5cbiAgICAgICAgd2NzZG1UYWJsZVJhdGVzLmluaXRGb3JtKCk7XG5cbiAgICAgICAgaWYgKCEkKCcjd2NzZG0tdGFibGUtLXRhYmxlX3JhdGVzLS1kdW1teSB0Ym9keSB0cicpLmxlbmd0aCkge1xuICAgICAgICAgICAgd2NzZG1UYWJsZVJhdGVzLmFkZFJhdGVSb3coKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaW5pdEZvcm06IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgICQoJy53Y3NkbS1maWVsZC1rZXktLXRvdGFsX2Nvc3RfdHlwZSA+IG9wdGlvblt2YWx1ZT1cImZvcm11bGFcIl0nKS5wcm9wKCdkaXNhYmxlZCcsICF3Y3NkbVRhYmxlUmF0ZXMucGFyYW1zLmlzUHJvKTtcblxuICAgICAgICB2YXIgZGlzdGFuY2VVbml0U2VsZWN0ZWQgPSAkKCcjd29vY29tbWVyY2Vfd2NzZG1fZGlzdGFuY2VfdW5pdCcpLnZhbCgpO1xuICAgICAgICB2YXIgJGRpc3RhbmNlVW5pdEZpZWxkcyA9ICQoJyN3b29jb21tZXJjZV93Y3NkbV9kaXN0YW5jZV91bml0JykuZGF0YSgnZmllbGRzJyk7XG4gICAgICAgIHZhciBsYWJlbCA9IF8uaGFzKCRkaXN0YW5jZVVuaXRGaWVsZHMubGFiZWwsIGRpc3RhbmNlVW5pdFNlbGVjdGVkKSA/ICRkaXN0YW5jZVVuaXRGaWVsZHMubGFiZWxbZGlzdGFuY2VVbml0U2VsZWN0ZWRdIDogJyc7XG4gICAgICAgIGlmIChsYWJlbCAmJiBsYWJlbC5sZW5ndGgpIHtcbiAgICAgICAgICAgIF8uZWFjaCgkZGlzdGFuY2VVbml0RmllbGRzLnRhcmdldHMsIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkudGV4dChsYWJlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaGFuZGxlQWRkUmF0ZUJ1dHRvbjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQoZS5jdXJyZW50VGFyZ2V0KS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXG4gICAgICAgIHdjc2RtVGFibGVSYXRlcy5hZGRSYXRlUm93KCk7XG5cbiAgICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgIH0sXG4gICAgaGFuZGxlUmF0ZUZpZWxkRHVtbXk6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciAkZmllbGQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgdmFyICRyb3cgPSAkZmllbGQuY2xvc2VzdCgndHInKTtcbiAgICAgICAgJHJvdy5maW5kKCcud2NzZG0tZmllbGQtLWNvbnRleHQtLWhpZGRlbltkYXRhLWlkPScgKyAkZmllbGQuZGF0YSgnaWQnKSArICddJykudmFsKGUudGFyZ2V0LnZhbHVlKTtcblxuICAgICAgICBpZiAoJGZpZWxkLmhhc0NsYXNzKCd3Y3NkbS1maWVsZC0tY29udGV4dC0tZHVtbXktLW1heF9kaXN0YW5jZScpKSB7XG4gICAgICAgICAgICAkcm93LmFkZENsYXNzKCdlZGl0aW5nJyk7XG4gICAgICAgICAgICAkZmllbGQub2ZmKCdibHVyJywgd2NzZG1UYWJsZVJhdGVzLnNvcnRSYXRlUm93cyk7XG4gICAgICAgICAgICAkZmllbGQub24oJ2JsdXInLCB3Y3NkbVRhYmxlUmF0ZXMuc29ydFJhdGVSb3dzKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2hvd0FkdmFuY2VkUmF0ZUZvcm06IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICQoJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15IC5zZWxlY3QtaXRlbScpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICQoJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15IHRib2R5IHRyJykucmVtb3ZlQ2xhc3MoKTtcblxuICAgICAgICB2YXIgJHJvdyA9ICQoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCd0cicpLmFkZENsYXNzKCdlZGl0aW5nJyk7XG5cbiAgICAgICAgJHJvdy5maW5kKCcud2NzZG0tZmllbGQtLWNvbnRleHQtLWhpZGRlbicpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBmaWVsZCkge1xuICAgICAgICAgICAgJCgnLndjc2RtLWZpZWxkLS1jb250ZXh0LS1hZHZhbmNlZFtkYXRhLWlkPScgKyAkKGZpZWxkKS5kYXRhKCdpZCcpICsgJ10nKS52YWwoJChmaWVsZCkudmFsKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0b2dnbGVCb3R0b25zKHtcbiAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICBpZDogJ2NhbmNlbC1hZHZhbmNlZCcsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgIGljb246ICd1bmRvJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJpZ2h0OiB7XG4gICAgICAgICAgICAgICAgaWQ6ICdhcHBseS1hZHZhbmNlZCcsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdBcHBseSBDaGFuZ2VzJyxcbiAgICAgICAgICAgICAgICBpY29uOiAnZWRpdG9yLXNwZWxsY2hlY2snXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5tb2RhbC1jbG9zZS1saW5rJykuaGlkZSgpO1xuXG4gICAgICAgICQoJyN3Y3NkbS1maWVsZC1ncm91cC13cmFwLS1hZHZhbmNlZF9yYXRlJykuZmFkZUluKCkuc2libGluZ3MoJy53Y3NkbS1maWVsZC1ncm91cC13cmFwJykuaGlkZSgpO1xuICAgIH0sXG4gICAgYXBwbHlBZHZhbmNlZEZvcm06IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICQoJy53Y3NkbS1maWVsZC0tY29udGV4dC0tYWR2YW5jZWQnKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZElkID0gJChmaWVsZCkuZGF0YSgnaWQnKTtcbiAgICAgICAgICAgICQoJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15IHRib2R5IHRyLmVkaXRpbmcgLndjc2RtLWZpZWxkLS1jb250ZXh0LS1kdW1teVtkYXRhLWlkPScgKyBmaWVsZElkICsgJ106bm90KGEpJykudmFsKCQoZmllbGQpLnZhbCgpKTtcbiAgICAgICAgICAgICQoJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15IHRib2R5IHRyLmVkaXRpbmcgLndjc2RtLWZpZWxkLS1jb250ZXh0LS1oaWRkZW5bZGF0YS1pZD0nICsgZmllbGRJZCArICddOm5vdChhKScpLnZhbCgkKGZpZWxkKS52YWwoKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdjc2RtVGFibGVSYXRlcy5jbG9zZUFkdmFuY2VkUmF0ZUZvcm0oZSk7XG4gICAgfSxcbiAgICBjbG9zZUFkdmFuY2VkUmF0ZUZvcm06IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKCcjd2NzZG0tZmllbGQtZ3JvdXAtd3JhcC0tYWR2YW5jZWRfcmF0ZScpLmhpZGUoKS5zaWJsaW5ncygnLndjc2RtLWZpZWxkLWdyb3VwLXdyYXAnKS5ub3QoJy53Y3NkbS1oaWRkZW4nKS5mYWRlSW4oKTtcbiAgICAgICAgdG9nZ2xlQm90dG9ucygpO1xuICAgICAgICAkKCcubW9kYWwtY2xvc2UtbGluaycpLnNob3coKTtcbiAgICAgICAgd2NzZG1UYWJsZVJhdGVzLnNjcm9sbFRvVGFibGVSYXRlKCk7XG4gICAgICAgIHdjc2RtVGFibGVSYXRlcy5zb3J0UmF0ZVJvd3MoKTtcbiAgICB9LFxuICAgIGhpZ2hsaWdodFJvdzogZnVuY3Rpb24gKCkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIHZhciAkcm93ID0gJCgnI3djc2RtLXRhYmxlLS10YWJsZV9yYXRlcy0tZHVtbXkgdGJvZHkgdHIuZWRpdGluZycpO1xuICAgICAgICBpZiAoJHJvdy5sZW5ndGgpIHtcbiAgICAgICAgICAgICRyb3cuYWRkQ2xhc3MoJ2hpZ2hsaWdodGVkJyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkcm93LnJlbW92ZUNsYXNzKCdoaWdobGlnaHRlZCcpO1xuICAgICAgICAgICAgfSwgMTUwMCk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnI3djc2RtLXRhYmxlLS10YWJsZV9yYXRlcy0tZHVtbXkgdGJvZHkgdHInKS5yZW1vdmVDbGFzcygnZWRpdGluZycpO1xuICAgIH0sXG4gICAgYWRkUmF0ZVJvdzogZnVuY3Rpb24gKCkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIHZhciAkbGFzdFJvdyA9ICQoJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15IHRib2R5IHRyOmxhc3QtY2hpbGQnKTtcblxuICAgICAgICAkKCcjd2NzZG0tdGFibGUtLXRhYmxlX3JhdGVzLS1kdW1teSB0Ym9keScpLmFwcGVuZCh3cC50ZW1wbGF0ZSgnd2NzZG0tZHVtbXktcm93JykpO1xuXG4gICAgICAgIGlmICgkbGFzdFJvdykge1xuICAgICAgICAgICAgJGxhc3RSb3cuZmluZCgnLndjc2RtLWZpZWxkLS1jb250ZXh0LS1oaWRkZW46bm90KGEpJykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkSWQgPSAkKGZpZWxkKS5kYXRhKCdpZCcpO1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZFZhbHVlID0gZmllbGRJZCA9PT0gJ3dvb2NvbW1lcmNlX3djc2RtX21heF9kaXN0YW5jZScgPyBNYXRoLmNlaWwoKHBhcnNlSW50KCQoZmllbGQpLnZhbCgpLCAxMCkgKiAxLjgpKSA6ICQoZmllbGQpLnZhbCgpO1xuICAgICAgICAgICAgICAgICQoJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15IHRib2R5IHRyOmxhc3QtY2hpbGQgLndjc2RtLWZpZWxkW2RhdGEtaWQ9JyArIGZpZWxkSWQgKyAnXScpLnZhbChmaWVsZFZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgd2NzZG1UYWJsZVJhdGVzLnNjcm9sbFRvVGFibGVSYXRlKCk7XG5cbiAgICAgICAgd2NzZG1UYWJsZVJhdGVzLmluaXRGb3JtKCk7XG4gICAgfSxcbiAgICBkZWxldGVSYXRlUm93OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAkKCcjd2NzZG0tdGFibGUtLXRhYmxlX3JhdGVzLS1kdW1teSB0Ym9keSAuc2VsZWN0LWl0ZW06bm90KDpjaGVja2VkKScpLmNsb3Nlc3QoJ3RyJykuaGlkZSgpO1xuICAgICAgICAkKCcjd2NzZG0tdGFibGUtLXRhYmxlX3JhdGVzLS1kdW1teScpLmZpbmQoJy53Y3NkbS1jb2wtLXNlbGVjdC1pdGVtLCAud2NzZG0tY29sLS1saW5rX2FkdmFuY2VkJykuaGlkZSgpO1xuICAgICAgICAkKCcjd2NzZG0tZmllbGQtZ3JvdXAtd3JhcC0tdGFibGVfcmF0ZXMnKS5zaWJsaW5ncygpLmhpZGUoKTtcblxuICAgICAgICB3Y3NkbVRhYmxlUmF0ZXMuc2Nyb2xsVG9UYWJsZVJhdGUoKTtcblxuICAgICAgICB0b2dnbGVCb3R0b25zKHtcbiAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICBpZDogJ2RlbGV0ZS1yYXRlLWNhbmNlbCcsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgIGljb246ICd1bmRvJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJpZ2h0OiB7XG4gICAgICAgICAgICAgICAgaWQ6ICdkZWxldGUtcmF0ZS1jb25maXJtJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0NvbmZpcm0gRGVsZXRlJyxcbiAgICAgICAgICAgICAgICBpY29uOiAndHJhc2gnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsZXRlUmF0ZVJvd0NhbmNlbDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgJCgnI3djc2RtLXRhYmxlLS10YWJsZV9yYXRlcy0tZHVtbXkgdGJvZHkgdHInKS5zaG93KCk7XG4gICAgICAgICQoJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15JykuZmluZCgnLndjc2RtLWNvbC0tc2VsZWN0LWl0ZW0sIC53Y3NkbS1jb2wtLWxpbmtfYWR2YW5jZWQnKS5zaG93KCk7XG4gICAgICAgICQoJyN3Y3NkbS1maWVsZC1ncm91cC13cmFwLS10YWJsZV9yYXRlcycpLnNpYmxpbmdzKCkubm90KCcud2NzZG0taGlkZGVuJykuZmFkZUluKCk7XG5cbiAgICAgICAgd2NzZG1UYWJsZVJhdGVzLnNjcm9sbFRvVGFibGVSYXRlKCk7XG5cbiAgICAgICAgdG9nZ2xlQm90dG9ucyh7XG4gICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgaWQ6ICdkZWxldGUtcmF0ZS1zZWxlY3QnLFxuICAgICAgICAgICAgICAgIGxhYmVsOiAnRGVsZXRlIFNlbGVjdGVkIFJhdGVzJyxcbiAgICAgICAgICAgICAgICBpY29uOiAndHJhc2gnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsZXRlUmF0ZVJvd0NvbmZpcm06IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICQoJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15IHRib2R5IC5zZWxlY3QtaXRlbTpjaGVja2VkJykuY2xvc2VzdCgndHInKS5yZW1vdmUoKTtcbiAgICAgICAgJCgnI3djc2RtLXRhYmxlLS10YWJsZV9yYXRlcy0tZHVtbXkgdGJvZHkgdHInKS5zaG93KCk7XG4gICAgICAgICQoJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15JykuZmluZCgnLndjc2RtLWNvbC0tc2VsZWN0LWl0ZW0sIC53Y3NkbS1jb2wtLWxpbmtfYWR2YW5jZWQnKS5zaG93KCk7XG4gICAgICAgICQoJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15IC5zZWxlY3QtaXRlbScpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICQoJyN3Y3NkbS1maWVsZC1ncm91cC13cmFwLS10YWJsZV9yYXRlcycpLnNpYmxpbmdzKCkubm90KCcud2NzZG0taGlkZGVuJykuZmFkZUluKCk7XG5cbiAgICAgICAgdG9nZ2xlQm90dG9ucygpO1xuXG4gICAgICAgIGlmICghJCgnI3djc2RtLXRhYmxlLS10YWJsZV9yYXRlcy0tZHVtbXkgdGJvZHkgdHInKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHdjc2RtVGFibGVSYXRlcy5hZGRSYXRlUm93KCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHRvZ2dsZVJvd3M6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICQuZWFjaCgkKCcjd2NzZG0tdGFibGUtLXRhYmxlX3JhdGVzLS1kdW1teSB0Ym9keSB0cicpLCBmdW5jdGlvbiAoaW5kZXgsIHJvdykge1xuICAgICAgICAgICAgd2NzZG1UYWJsZVJhdGVzLnRvZ2dsZVJvd1NlbGVjdGVkKCQocm93KSwgJChlLnRhcmdldCkuaXMoJzpjaGVja2VkJykpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoJChlLnRhcmdldCkuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgIHRvZ2dsZUJvdHRvbnMoe1xuICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdkZWxldGUtcmF0ZS1zZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0RlbGV0ZSBTZWxlY3RlZCBSYXRlcycsXG4gICAgICAgICAgICAgICAgICAgIGljb246ICd0cmFzaCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvZ2dsZUJvdHRvbnMoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdG9nZ2xlUm93OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB2YXIgJGZpZWxkID0gJChlLnRhcmdldCk7XG4gICAgICAgIHZhciAkcm93ID0gJChlLnRhcmdldCkuY2xvc2VzdCgndHInKTtcblxuICAgICAgICB3Y3NkbVRhYmxlUmF0ZXMudG9nZ2xlUm93U2VsZWN0ZWQoJHJvdywgJGZpZWxkLmlzKCc6Y2hlY2tlZCcpKTtcblxuICAgICAgICBpZiAoJCgnI3djc2RtLXRhYmxlLS10YWJsZV9yYXRlcy0tZHVtbXkgdGJvZHkgLnNlbGVjdC1pdGVtOmNoZWNrZWQnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRvZ2dsZUJvdHRvbnMoe1xuICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdkZWxldGUtcmF0ZS1zZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0RlbGV0ZSBTZWxlY3RlZCBSYXRlcycsXG4gICAgICAgICAgICAgICAgICAgIGljb246ICd0cmFzaCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvZ2dsZUJvdHRvbnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpc0J1bGtDaGVja2VkID0gJCgnI3djc2RtLXRhYmxlLS10YWJsZV9yYXRlcy0tZHVtbXkgdGJvZHkgLnNlbGVjdC1pdGVtJykubGVuZ3RoID09PSAkKCcjd2NzZG0tdGFibGUtLXRhYmxlX3JhdGVzLS1kdW1teSB0Ym9keSAuc2VsZWN0LWl0ZW06Y2hlY2tlZCcpLmxlbmd0aDtcblxuICAgICAgICAkKCcjd2NzZG0tdGFibGUtLXRhYmxlX3JhdGVzLS1kdW1teSB0aGVhZCAuc2VsZWN0LWl0ZW0nKS5wcm9wKCdjaGVja2VkJywgaXNCdWxrQ2hlY2tlZCk7XG4gICAgfSxcbiAgICB0b2dnbGVSb3dTZWxlY3RlZDogZnVuY3Rpb24gKCRyb3csIGlzQ2hlY2tlZCkge1xuICAgICAgICAkcm93LmZpbmQoJy53Y3NkbS1maWVsZC0tY29udGV4dC0tZHVtbXknKS5wcm9wKCdkaXNhYmxlZCcsIGlzQ2hlY2tlZCk7XG5cbiAgICAgICAgaWYgKGlzQ2hlY2tlZCkge1xuICAgICAgICAgICAgJHJvdy5hZGRDbGFzcygnc2VsZWN0ZWQnKS5maW5kKCcuc2VsZWN0LWl0ZW0nKS5wcm9wKCdjaGVja2VkJywgaXNDaGVja2VkKTtcbiAgICAgICAgICAgICRyb3cuZmluZCgnYScpLmNzcygnb3BhY2l0eScsICcwLjQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRyb3cucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJykuZmluZCgnLnNlbGVjdC1pdGVtJykucHJvcCgnY2hlY2tlZCcsIGlzQ2hlY2tlZCk7XG4gICAgICAgICAgICAkcm93LmZpbmQoJ2EnKS5jc3MoJ29wYWNpdHknLCAnMScpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzb3J0UmF0ZVJvd3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICB2YXIgcm93cyA9ICQoJyN3Y3NkbS10YWJsZS0tdGFibGVfcmF0ZXMtLWR1bW15ID4gdGJvZHkgPiB0cicpLmdldCgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZUFEaXN0YW5jZSA9ICQoYSkuZmluZCgnLndjc2RtLWZpZWxkLS1jb250ZXh0LS1kdW1teS0tbWF4X2Rpc3RhbmNlJykudmFsKCk7XG4gICAgICAgICAgICB2YXIgdmFsdWVCRGlzdGFuY2UgPSAkKGIpLmZpbmQoJy53Y3NkbS1maWVsZC0tY29udGV4dC0tZHVtbXktLW1heF9kaXN0YW5jZScpLnZhbCgpO1xuXG4gICAgICAgICAgICBpZiAoaXNOYU4odmFsdWVBRGlzdGFuY2UpIHx8ICF2YWx1ZUFEaXN0YW5jZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFsdWVBRGlzdGFuY2UgPSBwYXJzZUludCh2YWx1ZUFEaXN0YW5jZSwgMTApO1xuICAgICAgICAgICAgdmFsdWVCRGlzdGFuY2UgPSBwYXJzZUludCh2YWx1ZUJEaXN0YW5jZSwgMTApO1xuXG4gICAgICAgICAgICBpZiAodmFsdWVBRGlzdGFuY2UgPCB2YWx1ZUJEaXN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZhbHVlQURpc3RhbmNlID4gdmFsdWVCRGlzdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQuZWFjaChyb3dzLCBmdW5jdGlvbiAoaW5kZXgsIHJvdykge1xuICAgICAgICAgICAgdmFyICRyb3cgPSAkKHJvdykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnI3djc2RtLXRhYmxlLS10YWJsZV9yYXRlcy0tZHVtbXknKS5jaGlsZHJlbigndGJvZHknKS5hcHBlbmQocm93KTtcbiAgICAgICAgICAgICRyb3cuZmFkZUluKCdzbG93Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2NzZG1UYWJsZVJhdGVzLmhpZ2hsaWdodFJvdygpO1xuICAgICAgICB9LCAxMDApO1xuICAgIH0sXG4gICAgc2Nyb2xsVG9UYWJsZVJhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLndjLW1vZGFsLXNoaXBwaW5nLW1ldGhvZC1zZXR0aW5ncycpLnNjcm9sbFRvcCgkKCcud2MtbW9kYWwtc2hpcHBpbmctbWV0aG9kLXNldHRpbmdzJykuZmluZCgnZm9ybScpLm91dGVySGVpZ2h0KCkpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQmFja2VuZCBTY3JpcHRzXG4gKi9cblxudmFyIHdjc2RtQmFja2VuZCA9IHtcbiAgICBpbml0RnJvbTogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjd29vY29tbWVyY2Vfd2NzZG1fb3JpZ2luX3R5cGUnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblxuICAgICAgICAkKCcud2MtbW9kYWwtc2hpcHBpbmctbWV0aG9kLXNldHRpbmdzIHRhYmxlLmZvcm0tdGFibGUnKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgdGFibGUpIHtcbiAgICAgICAgICAgIHZhciAkcm93cyA9ICQodGFibGUpLmZpbmQoJ3RyJyk7XG4gICAgICAgICAgICBpZiAoISRyb3dzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICQodGFibGUpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKCcud2NzZG0tZmllbGQtZ3JvdXAnKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZmllbGRHcm91cCkge1xuICAgICAgICAgICAgdmFyIGZpZWxkR3JvdXBJZCA9ICQoZmllbGRHcm91cClcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd3b29jb21tZXJjZV93Y3NkbV9maWVsZF9ncm91cF8nLCAnJyk7XG5cbiAgICAgICAgICAgIHZhciAkZmllbGRHcm91cERlc2NyaXB0aW9uID0gJChmaWVsZEdyb3VwKVxuICAgICAgICAgICAgICAgIC5uZXh0KCdwJylcbiAgICAgICAgICAgICAgICAuZGV0YWNoKCk7XG5cbiAgICAgICAgICAgIHZhciAkZmllbGRHcm91cFRhYmxlID0gJChmaWVsZEdyb3VwKVxuICAgICAgICAgICAgICAgIC5uZXh0QWxsKCd0YWJsZS5mb3JtLXRhYmxlJylcbiAgICAgICAgICAgICAgICAuZmlyc3QoKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsICd3Y3NkbS10YWJsZS0tJyArIGZpZWxkR3JvdXBJZClcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3djc2RtLXRhYmxlIHdjc2RtLXRhYmxlLS0nICsgZmllbGRHcm91cElkKVxuICAgICAgICAgICAgICAgIC5kZXRhY2goKTtcblxuICAgICAgICAgICAgJChmaWVsZEdyb3VwKVxuICAgICAgICAgICAgICAgIC53cmFwKCc8ZGl2IGlkPVwid2NzZG0tZmllbGQtZ3JvdXAtd3JhcC0tJyArIGZpZWxkR3JvdXBJZCArICdcIiBjbGFzcz1cIndjc2RtLWZpZWxkLWdyb3VwLXdyYXAgd2NzZG0tZmllbGQtZ3JvdXAtd3JhcC0tJyArIGZpZWxkR3JvdXBJZCArICdcIj48L2Rpdj4nKTtcblxuICAgICAgICAgICAgJGZpZWxkR3JvdXBEZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgIC5hcHBlbmRUbygnI3djc2RtLWZpZWxkLWdyb3VwLXdyYXAtLScgKyBmaWVsZEdyb3VwSWQpO1xuXG4gICAgICAgICAgICAkZmllbGRHcm91cFRhYmxlXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKCcjd2NzZG0tZmllbGQtZ3JvdXAtd3JhcC0tJyArIGZpZWxkR3JvdXBJZCk7XG5cbiAgICAgICAgICAgIGlmICgkKGZpZWxkR3JvdXApLmhhc0NsYXNzKCd3Y3NkbS1maWVsZC1ncm91cC1oaWRkZW4nKSkge1xuICAgICAgICAgICAgICAgICQoJyN3Y3NkbS1maWVsZC1ncm91cC13cmFwLS0nICsgZmllbGRHcm91cElkKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3djc2RtLWhpZGRlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgcGFyYW1zID0gXy5tYXBPYmplY3Qod2NzZG1fYmFja2VuZCwgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlZmF1bHRfbGF0JzpcbiAgICAgICAgICAgICAgICBjYXNlICdkZWZhdWx0X2xuZyc6XG4gICAgICAgICAgICAgICAgY2FzZSAndGVzdF9kZXN0aW5hdGlvbl9sYXQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3Rlc3RfZGVzdGluYXRpb25fbG5nJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsKTtcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdjc2RtVGFibGVSYXRlcy5pbml0KHBhcmFtcyk7XG4gICAgICAgIHdjc2RtTWFwUGlja2VyLmluaXQocGFyYW1zKTtcblxuICAgICAgICB0b2dnbGVCb3R0b25zKCk7XG4gICAgfSxcbiAgICBtYXliZU9wZW5Nb2RhbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBUcnkgc2hvdyBzZXR0aW5ncyBtb2RhbCBvbiBzZXR0aW5ncyBwYWdlLlxuICAgICAgICBpZiAod2NzZG1fYmFja2VuZC5zaG93U2V0dGluZ3MpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpc01ldGhvZEFkZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIG1ldGhvZHMgPSAkKGRvY3VtZW50KS5maW5kKCcud2Mtc2hpcHBpbmctem9uZS1tZXRob2QtdHlwZScpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0aG9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWV0aG9kID0gbWV0aG9kc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQobWV0aG9kKS50ZXh0KCkgPT09IHdjc2RtX2JhY2tlbmQubWV0aG9kVGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQobWV0aG9kKS5jbG9zZXN0KCd0cicpLmZpbmQoJy5yb3ctYWN0aW9ucyAud2Mtc2hpcHBpbmctem9uZS1tZXRob2Qtc2V0dGluZ3MnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNNZXRob2RBZGRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTaG93IEFkZCBzaGlwcGluZyBtZXRob2QgbW9kYWwgaWYgdGhlIHNoaXBwaW5nIGlzIG5vdCBhZGRlZC5cbiAgICAgICAgICAgICAgICBpZiAoIWlzTWV0aG9kQWRkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLndjLXNoaXBwaW5nLXpvbmUtYWRkLW1ldGhvZCcpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJ3NlbGVjdFtuYW1lPVwiYWRkX21ldGhvZF9pZFwiXScpLnZhbCh3Y3NkbV9iYWNrZW5kLm1ldGhvZElkKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAkKCcjYnRuLW9rJykudHJpZ2dlcignY2xpY2snKTtcbiAgICB9LFxuICAgIHNob3dBcGlLZXlJbnN0cnVjdGlvbnM6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdG9nZ2xlQm90dG9ucyh7XG4gICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgaWQ6ICdjbG9zZS1pbnN0cnVjdGlvbnMnLFxuICAgICAgICAgICAgICAgIGxhYmVsOiAnQmFjaycsXG4gICAgICAgICAgICAgICAgaWNvbjogJ3VuZG8nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmlnaHQ6IHtcbiAgICAgICAgICAgICAgICBpZDogJ2dldC1hcGkta2V5JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0dldCBBUEkgS2V5JyxcbiAgICAgICAgICAgICAgICBpY29uOiAnYWRtaW4tbGlua3MnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJyN3Y3NkbS1maWVsZC1ncm91cC13cmFwLS1hcGlfa2V5X2luc3RydWN0aW9uJykuZmFkZUluKCkuc2libGluZ3MoKS5oaWRlKCk7XG5cbiAgICAgICAgJCgnLm1vZGFsLWNsb3NlLWxpbmsnKS5oaWRlKCk7XG4gICAgfSxcbiAgICBjbG9zZUFwaUtleUluc3RydWN0aW9uczogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAkKCcjd2NzZG0tZmllbGQtZ3JvdXAtd3JhcC0tYXBpX2tleV9pbnN0cnVjdGlvbicpLmhpZGUoKS5zaWJsaW5ncygpLm5vdCgnLndjc2RtLWhpZGRlbicpLmZhZGVJbigpO1xuXG4gICAgICAgICQoJy5tb2RhbC1jbG9zZS1saW5rJykuc2hvdygpO1xuXG4gICAgICAgIHRvZ2dsZUJvdHRvbnMoKTtcbiAgICB9LFxuICAgIHRvZ2dsZVN0b3JlT3JpZ2luRmllbGRzOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBzZWxlY3RlZCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgIHZhciBmaWVsZHMgPSAkKHRoaXMpLmRhdGEoJ2ZpZWxkcycpO1xuICAgICAgICBfLmVhY2goZmllbGRzLCBmdW5jdGlvbiAoZmllbGRJZHMsIGZpZWxkVmFsdWUpIHtcbiAgICAgICAgICAgIF8uZWFjaChmaWVsZElkcywgZnVuY3Rpb24gKGZpZWxkSWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSAhPT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBmaWVsZElkKS5jbG9zZXN0KCd0cicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcjJyArIGZpZWxkSWQpLmNsb3Nlc3QoJ3RyJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGJpbmRFdmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gSW5pdCBmb3JtXG4gICAgICAgICQoZG9jdW1lbnQuYm9keSkub2ZmKCd3Y19iYWNrYm9uZV9tb2RhbF9sb2FkZWQnLCB3Y3NkbUJhY2tlbmQuaW5pdEZyb20pO1xuICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9uKCd3Y19iYWNrYm9uZV9tb2RhbF9sb2FkZWQnLCB3Y3NkbUJhY2tlbmQuaW5pdEZyb20pO1xuXG4gICAgICAgIC8vIFN1Ym1pdCBmb3JtXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2snLCAnI3djc2RtLWJ0bi0tc2F2ZS1zZXR0aW5ncycsIHdjc2RtQmFja2VuZC5zdWJtaXRGb3JtKTtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN3Y3NkbS1idG4tLXNhdmUtc2V0dGluZ3MnLCB3Y3NkbUJhY2tlbmQuc3VibWl0Rm9ybSk7XG5cbiAgICAgICAgLy8gU2hvdyBBUEkgS2V5IGluc3RydWN0aW9uXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2snLCAnLndjc2RtLXNob3ctaW5zdHJ1Y3Rpb25zJywgd2NzZG1CYWNrZW5kLnNob3dBcGlLZXlJbnN0cnVjdGlvbnMpO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLndjc2RtLXNob3ctaW5zdHJ1Y3Rpb25zJywgd2NzZG1CYWNrZW5kLnNob3dBcGlLZXlJbnN0cnVjdGlvbnMpO1xuXG4gICAgICAgIC8vIENsb3NlIEFQSSBLZXkgaW5zdHJ1Y3Rpb25cbiAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljaycsICcjd2NzZG0tYnRuLS1jbG9zZS1pbnN0cnVjdGlvbnMnLCB3Y3NkbUJhY2tlbmQuY2xvc2VBcGlLZXlJbnN0cnVjdGlvbnMpO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3djc2RtLWJ0bi0tY2xvc2UtaW5zdHJ1Y3Rpb25zJywgd2NzZG1CYWNrZW5kLmNsb3NlQXBpS2V5SW5zdHJ1Y3Rpb25zKTtcblxuICAgICAgICAvLyBUb2dnbGUgU3RvcmUgT3JpZ2luIEZpZWxkc1xuICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NoYW5nZScsICcjd29vY29tbWVyY2Vfd2NzZG1fb3JpZ2luX3R5cGUnLCB3Y3NkbUJhY2tlbmQudG9nZ2xlU3RvcmVPcmlnaW5GaWVsZHMpO1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJyN3b29jb21tZXJjZV93Y3NkbV9vcmlnaW5fdHlwZScsIHdjc2RtQmFja2VuZC50b2dnbGVTdG9yZU9yaWdpbkZpZWxkcyk7XG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdjc2RtQmFja2VuZC5iaW5kRXZlbnRzKCk7XG4gICAgICAgIHdjc2RtQmFja2VuZC5tYXliZU9wZW5Nb2RhbCgpO1xuICAgIH1cbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KHdjc2RtQmFja2VuZC5pbml0KTtcbn0oalF1ZXJ5KSk7XG4iXX0=
